{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\Shimyon\\\\Emoiss\\\\RiteshBhai\\\\cdzb\\\\chargezone\\\\react-front-end\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"D:\\\\Shimyon\\\\Emoiss\\\\RiteshBhai\\\\cdzb\\\\chargezone\\\\react-front-end\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:\\\\Shimyon\\\\Emoiss\\\\RiteshBhai\\\\cdzb\\\\chargezone\\\\react-front-end\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Row,Card,CardBody,FormGroup,Label,Input,Button,Alert}from'reactstrap';import DatePicker from'react-datepicker';import'react-datepicker/dist/react-datepicker.css';import{Colxx,Separator}from'../../../components/common/CustomBootstrap';import{getCurrentUser}from'../../../helpers/Utils';import{historyReportAPI}from'../../../constants/defaultValues';import axios from'axios';const BatteryHistoricalData=({})=>{//date states\nconst _useState=useState(),_useState2=_slicedToArray(_useState,2),fromDate=_useState2[0],setFromDate=_useState2[1];const _useState3=useState(),_useState4=_slicedToArray(_useState3,2),toDate=_useState4[0],setToDate=_useState4[1];const _useState5=useState(),_useState6=_slicedToArray(_useState5,2),bin=_useState6[0],setBin=_useState6[1];//alert states\nconst _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),alertVisible=_useState8[0],setAlertVisible=_useState8[1];const _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),alertMsg=_useState10[0],setAlertMsg=_useState10[1];const _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),alertColor=_useState12[0],setAlertColor=_useState12[1];//state to disable button on click\nconst _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),buttonDisabled=_useState14[0],setButtonDisabled=_useState14[1];//loader state\nconst _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),isLoading=_useState16[0],setIsLoading=_useState16[1];//helper methods\n//Alert helper methods\nconst onDismissAlert=()=>{setAlertVisible(false);};const downloadExcelReport=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var currentUser,tempFromDate,tempToDate,params;return _regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:setAlertVisible(false);currentUser=getCurrentUser();tempFromDate=null,tempToDate=null;if(fromDate!=null&&fromDate!=\"\"){tempFromDate=fromDate.getDate()+\"-\"+(fromDate.getMonth()+1)+\"-\"+fromDate.getFullYear()+\" \"+fromDate.getHours()+\":\"+fromDate.getMinutes()+\":\"+fromDate.getSeconds();}if(toDate!=null&&toDate!=\"\"){tempToDate=toDate.getDate()+\"-\"+(toDate.getMonth()+1)+\"-\"+toDate.getFullYear()+\" \"+toDate.getHours()+\":\"+toDate.getMinutes()+\":\"+toDate.getSeconds();}if(!(tempToDate==null||tempFromDate==null)){_context.next=10;break;}setAlertVisible(true);setAlertMsg(\"Please Select From and To date.\");setAlertColor(\"danger\");return _context.abrupt(\"return\");case 10:setButtonDisabled(true);setIsLoading(true);params={bin:bin,from_date:tempFromDate,to_date:tempToDate};_context.next=15;return axios.post(historyReportAPI,params,{headers:{Authorization:\"Bearer \".concat(currentUser.token)}}).then(response=>{const responseData=response.data;if(responseData.status===1){const link=document.createElement('a');link.href=responseData.data.file;document.body.appendChild(link);link.click();document.body.removeChild(link);}else{setAlertVisible(true);setAlertMsg(responseData.msg);setAlertColor(\"danger\");}setButtonDisabled(false);setIsLoading(false);}).catch(error=>{setButtonDisabled(false);setIsLoading(false);console.log(error);});case 15:case\"end\":return _context.stop();}},_callee);}));return function downloadExcelReport(){return _ref.apply(this,arguments);};}();//Form Validation Schema\nreturn/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Colxx,{xxs:\"12\"},/*#__PURE__*/React.createElement(\"span\",{className:\"page_title\"},\"Battery Historical Data\"),/*#__PURE__*/React.createElement(Separator,{className:\"mb-5\"}))),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Colxx,{xxs:\"12\",className:\"mb-4\"},/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardBody,null,/*#__PURE__*/React.createElement(\"h3\",null,\"Select Option\"),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Colxx,{md:\"12\"},/*#__PURE__*/React.createElement(Alert,{color:alertColor,isOpen:alertVisible,toggle:onDismissAlert},alertMsg)),/*#__PURE__*/React.createElement(Colxx,{lg:3,sm:12},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,null,\"BIN\"),/*#__PURE__*/React.createElement(Input,{type:\"text\",placeholder:\"BIN\",name:\"bin\",value:bin,onChange:e=>setBin(e.target.value)}))),/*#__PURE__*/React.createElement(Colxx,{lg:3,sm:12},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,null,\"From Date\"),/*#__PURE__*/React.createElement(DatePicker,{showTimeInput:true,placeholderText:\"From Date\",selected:fromDate,onChange:date=>setFromDate(date),dateFormat:\"dd/MM/yyyy hh:mm aa\"}))),/*#__PURE__*/React.createElement(Colxx,{lg:3,sm:12},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,null,\"To Date\"),/*#__PURE__*/React.createElement(DatePicker,{showTimeInput:true,placeholderText:\"From Date\",selected:toDate,onChange:date=>setToDate(date),dateFormat:\"dd/MM/yyyy hh:mm aa\"}))),/*#__PURE__*/React.createElement(Colxx,{md:\"3\"},/*#__PURE__*/React.createElement(Button,{color:\"primary\",className:\"default mt-4\",onClick:()=>downloadExcelReport(),disabled:buttonDisabled},/*#__PURE__*/React.createElement(\"i\",{className:\"glyph-icon simple-icon-check font-weight-bold\"}),\" \",/*#__PURE__*/React.createElement(\"b\",null,isLoading?/*#__PURE__*/React.createElement(\"span\",null,\"Please Wait\"):/*#__PURE__*/React.createElement(\"span\",null,\"Download Excel Report\"))))))))));};export default BatteryHistoricalData;","map":{"version":3,"sources":["D:/Shimyon/Emoiss/RiteshBhai/cdzb/chargezone/react-front-end/src/views/app/reports/batteryHistoricalData.js"],"names":["React","useState","useEffect","Row","Card","CardBody","FormGroup","Label","Input","Button","Alert","DatePicker","Colxx","Separator","getCurrentUser","historyReportAPI","axios","BatteryHistoricalData","fromDate","setFromDate","toDate","setToDate","bin","setBin","alertVisible","setAlertVisible","alertMsg","setAlertMsg","alertColor","setAlertColor","buttonDisabled","setButtonDisabled","isLoading","setIsLoading","onDismissAlert","downloadExcelReport","currentUser","tempFromDate","tempToDate","getDate","getMonth","getFullYear","getHours","getMinutes","getSeconds","params","from_date","to_date","post","headers","Authorization","token","then","response","responseData","data","status","link","document","createElement","href","file","body","appendChild","click","removeChild","msg","catch","error","console","log","e","target","value","date"],"mappings":"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","sourcesContent":["import React,{useState,useEffect} from 'react';\nimport {\n  Row, Card, CardBody, FormGroup, Label,\n  Input, Button,Alert\n} from 'reactstrap';\nimport DatePicker from 'react-datepicker';\nimport 'react-datepicker/dist/react-datepicker.css';\nimport { Colxx, Separator } from '../../../components/common/CustomBootstrap';\nimport { getCurrentUser } from '../../../helpers/Utils'\nimport {historyReportAPI} from '../../../constants/defaultValues'\nimport axios from 'axios';\n\nconst BatteryHistoricalData = ({}) => {\n  //date states\n  const [fromDate,setFromDate] = useState();\n  const [toDate,setToDate] = useState();\n  const [bin,setBin] = useState();\n  //alert states\n  const [alertVisible,setAlertVisible] = useState(false);\n  const [alertMsg,setAlertMsg] = useState(\"\");\n  const [alertColor,setAlertColor] = useState(\"\");\n  //state to disable button on click\n  const [buttonDisabled,setButtonDisabled] = useState(false);\n  //loader state\n  const [isLoading,setIsLoading] = useState(false);\n\n  //helper methods\n  //Alert helper methods\n  const onDismissAlert = ()=>{\n    setAlertVisible(false);\n  }\n  const downloadExcelReport = async() => {\n    setAlertVisible(false);\n    \n    const currentUser = getCurrentUser();\n    let tempFromDate=null,tempToDate=null;\n    if (fromDate != null && fromDate !=\"\") {\n      tempFromDate = fromDate.getDate()+\"-\"+(fromDate.getMonth()+1)+\"-\"+fromDate.getFullYear()+\" \"+fromDate.getHours()+\":\"+fromDate.getMinutes()+\":\"+fromDate.getSeconds();\n    }\n    if (toDate != null && toDate !=\"\") {\n      tempToDate = toDate.getDate()+\"-\"+(toDate.getMonth()+1)+\"-\"+toDate.getFullYear()+\" \"+toDate.getHours()+\":\"+toDate.getMinutes()+\":\"+toDate.getSeconds();\n    }\n    if (tempToDate == null || tempFromDate ==null) {\n      setAlertVisible(true);\n      setAlertMsg(\"Please Select From and To date.\");\n      setAlertColor(\"danger\");\n      return; \n    }\n    setButtonDisabled(true);\n    setIsLoading(true);\n    \n    const params = {\n      bin:bin,\n      from_date:tempFromDate,\n      to_date:tempToDate\n    }\n    \n    await axios.post(historyReportAPI,\n      params,\n      {headers:{Authorization: `Bearer ${currentUser.token}`}})\n      .then(response=>{\n        const responseData = response.data;\n        if (responseData.status === 1) {\n          const link = document.createElement('a');\n          link.href = responseData.data.file;\n          document.body.appendChild(link);\n          link.click();\n          document.body.removeChild(link);\n        }else{\n          setAlertVisible(true);\n          setAlertMsg(responseData.msg);\n          setAlertColor(\"danger\");\n        }        \n        setButtonDisabled(false);\n        setIsLoading(false);\n      }).catch(error=>{\n        setButtonDisabled(false);\n        setIsLoading(false);\n        console.log(error);\n      })\n  }\n  //Form Validation Schema\n  return (\n    <>\n      <Row>\n        <Colxx xxs=\"12\">\n        <span className=\"page_title\">Battery Historical Data</span>\n        <Separator className=\"mb-5\" />\n        </Colxx>\n      </Row>\n      <Row>\n        <Colxx xxs=\"12\" className=\"mb-4\">\n            <Card>\n                <CardBody>\n                  <h3>Select Option</h3>\n                  <hr/>\n                  <Row>\n                    <Colxx md=\"12\">\n                      <Alert color={alertColor} isOpen={alertVisible} toggle={onDismissAlert}>\n                        {alertMsg}\n                      </Alert>\n                    </Colxx>\n                    <Colxx lg={3} sm={12}>\n                      <FormGroup>\n                        <Label>\n                          BIN\n                        </Label>\n                        <Input \n                          type=\"text\"\n                          placeholder=\"BIN\"\n                          name=\"bin\"\n                          value={bin}\n                          onChange={e=>setBin(e.target.value)}\n                        ></Input>\n                      </FormGroup>\n                    </Colxx>\n                    <Colxx lg={3} sm={12}>\n                      <FormGroup>\n                        <Label>\n                          From Date\n                        </Label>\n                        <DatePicker\n                        showTimeInput\n                        placeholderText=\"From Date\"\n                        selected={fromDate}\n                        onChange={date=>setFromDate(date)}\n                        dateFormat=\"dd/MM/yyyy hh:mm aa\"\n                        />\n                      </FormGroup>\n                    </Colxx>\n                    <Colxx lg={3} sm={12}>\n                      <FormGroup>\n                        <Label>\n                          To Date\n                        </Label>\n                        <DatePicker\n                        showTimeInput\n                        placeholderText=\"From Date\"\n                        selected={toDate}\n                        onChange={date=>setToDate(date)}\n                        dateFormat=\"dd/MM/yyyy hh:mm aa\"\n                        />\n                      </FormGroup>\n                    </Colxx>\n                    <Colxx md=\"3\">\n                      <Button color=\"primary\" className=\"default mt-4\" onClick={() => downloadExcelReport()} disabled={buttonDisabled}>\n                        <i className=\"glyph-icon simple-icon-check font-weight-bold\"></i> <b>{isLoading ?\n<span>Please Wait</span> : <span>Download Excel Report</span>}</b>\n                      </Button>\n                    </Colxx>\n                  </Row>\n                </CardBody>\n            </Card>\n        </Colxx>\n      </Row>    \n    </>\n  );\n};\n\nexport default BatteryHistoricalData;\n"]},"metadata":{},"sourceType":"module"}