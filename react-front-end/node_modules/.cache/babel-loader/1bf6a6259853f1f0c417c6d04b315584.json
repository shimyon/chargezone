{"ast":null,"code":"import _regeneratorRuntime from \"D:\\\\Shimyon\\\\Emoiss\\\\RiteshBhai\\\\cdzb\\\\chargezone\\\\react-front-end\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"D:\\\\Shimyon\\\\Emoiss\\\\RiteshBhai\\\\cdzb\\\\chargezone\\\\react-front-end\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"D:\\\\Shimyon\\\\Emoiss\\\\RiteshBhai\\\\cdzb\\\\chargezone\\\\react-front-end\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"D:\\\\Shimyon\\\\Emoiss\\\\RiteshBhai\\\\cdzb\\\\chargezone\\\\react-front-end\\\\src\\\\views\\\\app\\\\operations\\\\Queue.js\";\nimport React, { useEffect, useState } from 'react';\nimport { CardSubtitle, CardBody, Row, Table, Card, DropdownItem, DropdownMenu, DropdownToggle, UncontrolledDropdown, Button, Input, InputGroup, Alert } from 'reactstrap';\nimport { Colxx, Separator } from '../../../components/common/CustomBootstrap';\nimport { getCurrentUser } from '../../../helpers/Utils';\nimport { getQueueLogAPI } from '../../../constants/defaultValues';\nimport axios from 'axios';\n\nconst Queue = () => {\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        transactionList = _useState2[0],\n        setTransactionList = _useState2[1];\n\n  const _useState3 = useState(false),\n        _useState4 = _slicedToArray(_useState3, 2),\n        isLoading = _useState4[0],\n        setIsLoading = _useState4[1]; //search state\n\n\n  const _useState5 = useState(\"\"),\n        _useState6 = _slicedToArray(_useState5, 2),\n        searchBy = _useState6[0],\n        setSearchBy = _useState6[1]; //Pagination states\n\n\n  const _useState7 = useState(\"1\"),\n        _useState8 = _slicedToArray(_useState7, 2),\n        pageCount = _useState8[0],\n        setPageCount = _useState8[1];\n\n  const _useState9 = useState(\"1\"),\n        _useState10 = _slicedToArray(_useState9, 2),\n        lastPageCount = _useState10[0],\n        setLastPageCount = _useState10[1]; //alert states\n\n\n  const _useState11 = useState(false),\n        _useState12 = _slicedToArray(_useState11, 2),\n        alertVisible = _useState12[0],\n        setAlertVisible = _useState12[1];\n\n  const _useState13 = useState(\"\"),\n        _useState14 = _slicedToArray(_useState13, 2),\n        alertMsg = _useState14[0],\n        setAlertMsg = _useState14[1];\n\n  const _useState15 = useState(\"\"),\n        _useState16 = _slicedToArray(_useState15, 2),\n        alertColor = _useState16[0],\n        setAlertColor = _useState16[1];\n\n  useEffect(() => {\n    getQueueLogAPICall();\n  }, [pageCount]); //API CALLS\n\n  const getQueueLogAPICall = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var currentUser;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            setIsLoading(true);\n            currentUser = getCurrentUser();\n            _context.next = 4;\n            return axios.get(getQueueLogAPI + pageCount + \"&search_param=\" + searchBy, {\n              headers: {\n                Authorization: \"Bearer \".concat(currentUser.token)\n              }\n            }).then(response => {\n              const responseData = response.data;\n\n              if (responseData.status === 1) {\n                setLastPageCount(responseData.data.last_page);\n                setTransactionList(responseData.data.data);\n              } else {\n                console.log(responseData.msg);\n              }\n\n              setIsLoading(false);\n            }).catch(error => {\n              console.log(error);\n            });\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee);\n    }));\n\n    return function getQueueLogAPICall() {\n      return _ref.apply(this, arguments);\n    };\n  }(); //helper methods\n  //Alert helper methods\n\n\n  const queueAlert = (status, msg) => {\n    setAlertVisible(true);\n    setAlertMsg(msg);\n\n    if (status === 1) {\n      setAlertColor(\"success\");\n    } else {\n      setAlertColor(\"danger\");\n    }\n  };\n\n  const onDismissAlert = () => {\n    setAlertVisible(false);\n  }; //pagination method\n\n\n  const renderPageList = () => {\n    const pageNumbers = [];\n\n    for (let i = 0; i < lastPageCount; i += 1) {\n      pageNumbers.push( /*#__PURE__*/React.createElement(DropdownItem, {\n        key: i,\n        onClick: () => {\n          setPageCount(i + 1);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 9\n        }\n      }, i + 1));\n    }\n\n    return pageNumbers;\n  }; //handle search input\n\n\n  const handleSearch = () => {\n    setPageCount(1);\n    getQueueLogAPICall();\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Colxx, {\n    xxs: \"12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"page_title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }\n  }, \"Queue\"), /*#__PURE__*/React.createElement(Separator, {\n    className: \"mb-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 11\n    }\n  }))), /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Colxx, {\n    md: \"4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"ml-2 mb-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(InputGroup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    type: \"text\",\n    placeholder: \"Search\",\n    value: searchBy,\n    onChange: e => setSearchBy(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    className: \"default search-icon\",\n    color: \"primary\",\n    outline: true,\n    onClick: () => handleSearch(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"glyph-icon simple-icon-magnifier\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 106\n    }\n  }))))), /*#__PURE__*/React.createElement(Colxx, {\n    md: \"8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-right mr-5 mb-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 15\n    }\n  }, \"Page \"), /*#__PURE__*/React.createElement(UncontrolledDropdown, {\n    className: \"d-inline-block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(DropdownToggle, {\n    caret: true,\n    color: \"outline-primary\",\n    size: \"xs\",\n    \"data-display\": \"static\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 17\n    }\n  }, pageCount), /*#__PURE__*/React.createElement(DropdownMenu, {\n    className: \"dropdownMenu\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 17\n    }\n  }, renderPageList())), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 15\n    }\n  }, \" of \"), lastPageCount))), /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Colxx, {\n    xxs: \"12\",\n    className: \"mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(CardBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(CardSubtitle, {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Alert, {\n    color: alertColor,\n    isOpen: alertVisible,\n    toggle: onDismissAlert,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 19\n    }\n  }, alertMsg)), /*#__PURE__*/React.createElement(Table, {\n    responsive: true,\n    striped: true,\n    bordered: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 23\n    }\n  }, \"#\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 23\n    }\n  }, \"Station\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 23\n    }\n  }, \"Operator\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 23\n    }\n  }, \"EV\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 23\n    }\n  }, \"DB1\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 23\n    }\n  }, \"CB1\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 23\n    }\n  }, \"DB2\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 23\n    }\n  }, \"CB2\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 23\n    }\n  }, \"OTP\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 19\n    }\n  }, isLoading ? /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    className: \"text-center\",\n    colSpan: \"9\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"custom-list-loading\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 67\n    }\n  }))) : transactionList.length > 0 ? transactionList.map((item, index) => /*#__PURE__*/React.createElement(\"tr\", {\n    key: item.queue_master_id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 31\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 33\n    }\n  }, pageCount == 1 ? index + 1 : (pageCount - 1) * 10 + index + 1), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 33\n    }\n  }, item.station_name), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 33\n    }\n  }, item.operator), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"mb-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 35\n    }\n  }, /*#__PURE__*/React.createElement(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 55\n    }\n  }, \"VehicleVIN:\"), item.vehicle_vin), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"mb-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 35\n    }\n  }, /*#__PURE__*/React.createElement(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 55\n    }\n  }, \"Regi.No.:\"), item.registration_no)), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"mb-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 57\n    }\n  }, \"QR Code: \"), item.discharged_b1_qr_code)), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"mb-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 57\n    }\n  }, \"QR Code: \"), item.charged_b1_qr_code)), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"mb-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 57\n    }\n  }, \"QR Code: \"), item.discharged_b2_qr_code)), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"mb-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 57\n    }\n  }, \"QR Code: \"), item.charged_b2_qr_code)), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 33\n    }\n  }, item.end_otp))) : /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 31\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    className: \"text-center text-danger\",\n    colSpan: \"9\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 35\n    }\n  }, \"Data  Not  Found\")))))))));\n};\n\nexport default Queue;","map":{"version":3,"sources":["D:/Shimyon/Emoiss/RiteshBhai/cdzb/chargezone/react-front-end/src/views/app/operations/Queue.js"],"names":["React","useEffect","useState","CardSubtitle","CardBody","Row","Table","Card","DropdownItem","DropdownMenu","DropdownToggle","UncontrolledDropdown","Button","Input","InputGroup","Alert","Colxx","Separator","getCurrentUser","getQueueLogAPI","axios","Queue","transactionList","setTransactionList","isLoading","setIsLoading","searchBy","setSearchBy","pageCount","setPageCount","lastPageCount","setLastPageCount","alertVisible","setAlertVisible","alertMsg","setAlertMsg","alertColor","setAlertColor","getQueueLogAPICall","currentUser","get","headers","Authorization","token","then","response","responseData","data","status","last_page","console","log","msg","catch","error","queueAlert","onDismissAlert","renderPageList","pageNumbers","i","push","handleSearch","e","target","value","length","map","item","index","queue_master_id","station_name","operator","vehicle_vin","registration_no","discharged_b1_qr_code","charged_b1_qr_code","discharged_b2_qr_code","charged_b2_qr_code","end_otp"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { \n  CardSubtitle,CardBody, \n  Row, Table, Card, DropdownItem,\n  DropdownMenu,\n  DropdownToggle,\n  UncontrolledDropdown,\n  Button,Input,InputGroup,Alert\n } from 'reactstrap';\nimport { Colxx, Separator } from '../../../components/common/CustomBootstrap';\nimport {getCurrentUser} from '../../../helpers/Utils';\nimport {getQueueLogAPI} from '../../../constants/defaultValues';\nimport axios from 'axios';\n\nconst Queue = () => {\n  const [transactionList,setTransactionList] = useState([]);\n  const [isLoading,setIsLoading] = useState(false);\n  //search state\n  const [searchBy,setSearchBy] = useState(\"\");\n  //Pagination states\n  const [pageCount,setPageCount] = useState(\"1\");\n  const [lastPageCount,setLastPageCount] = useState(\"1\");\n  //alert states\n  const [alertVisible,setAlertVisible] = useState(false);\n  const [alertMsg,setAlertMsg] = useState(\"\");\n  const [alertColor,setAlertColor] = useState(\"\");\n\n  useEffect(()=>{\n    getQueueLogAPICall();\n  },[pageCount])\n\n  //API CALLS\n  const getQueueLogAPICall = async() => {\n    setIsLoading(true);\n    const currentUser = getCurrentUser();\n    await axios.get(getQueueLogAPI+pageCount+`&search_param=`+searchBy,\n      {headers:{Authorization: `Bearer ${currentUser.token}`}})\n      .then(response=>{\n        const responseData = response.data;\n        if (responseData.status === 1) {\n          setLastPageCount(responseData.data.last_page)\n          setTransactionList(responseData.data.data);\n        }else{\n          console.log(responseData.msg);\n        }\n        setIsLoading(false);\n      }).catch(error=>{\n        console.log(error);\n      })\n  }\n  //helper methods\n  //Alert helper methods\n  const queueAlert = (status,msg)=>{\n    setAlertVisible(true);\n    setAlertMsg(msg);\n    if (status === 1) {\n      setAlertColor(\"success\");\n    } else {\n      setAlertColor(\"danger\");\n    }\n  }\n  const onDismissAlert = ()=>{\n    setAlertVisible(false);\n  }\n  //pagination method\n  const renderPageList = () => {\n    const pageNumbers = [];\n    for (let i = 0; i <lastPageCount; i += 1) {\n      pageNumbers.push(\n        <DropdownItem key={i} onClick={() => {setPageCount(i+1)}}>\n          {i+1}\n        </DropdownItem>\n      );\n    }\n    return pageNumbers;\n  };\n  //handle search input\n  const handleSearch = () => {\n      setPageCount(1);\n      getQueueLogAPICall();\n  }\n\n  return (\n    <>\n      <Row>\n        <Colxx xxs=\"12\">\n        <span className=\"page_title\">Queue</span>\n          <Separator className=\"mb-5\" />\n        </Colxx>\n      </Row>\n      <Row>\n        <Colxx md=\"4\">\n          <div className=\"ml-2 mb-2\">\n            <InputGroup>\n            <Input \n            type=\"text\" \n            placeholder=\"Search\"\n            value={searchBy}\n            onChange={e=>setSearchBy(e.target.value)}/>\n            <Button className=\"default search-icon\" color=\"primary\" outline onClick={()=>handleSearch()}><i className=\"glyph-icon simple-icon-magnifier\"></i></Button>\n            </InputGroup>  \n          </div>\n        </Colxx>\n        <Colxx md=\"8\">\n            <div className=\"text-right mr-5 mb-2\">\n              <span>Page </span>\n              <UncontrolledDropdown className=\"d-inline-block\">\n                <DropdownToggle caret color=\"outline-primary\" size=\"xs\" data-display=\"static\">\n                  {pageCount}\n                </DropdownToggle>\n                <DropdownMenu className=\"dropdownMenu\">\n                  {renderPageList()}\n                </DropdownMenu>\n              </UncontrolledDropdown>\n              <span> of </span>\n              {lastPageCount}\n            </div>\n        </Colxx>\n      </Row>\n      <Row>\n        <Colxx xxs=\"12\" className=\"mb-4\">\n          <Card>\n            <CardBody>\n              <CardSubtitle className=\"mb-3\">\n                  <Alert color={alertColor} isOpen={alertVisible} toggle={onDismissAlert}>\n                    {alertMsg}\n                  </Alert>\n              </CardSubtitle>\n              <Table responsive striped bordered>\n                  <thead>\n                    <tr>\n                      <th>#</th>\n                      <th>Station</th>\n                      <th>Operator</th>\n                      <th>EV</th>\n                      <th>DB1</th>\n                      <th>CB1</th>\n                      <th>DB2</th>\n                      <th>CB2</th>\n                      <th>OTP</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                  {isLoading ?\n                      <tr>\n                          <td className=\"text-center\" colSpan=\"9\"><div className=\"custom-list-loading\" /></td>\n                      </tr> : \n                         transactionList.length > 0 ?\n                            transactionList.map((item,index)=>\n                              <tr key={item.queue_master_id}>\n                                <th scope=\"row\">{pageCount==1?index+1:(pageCount-1)*10+index +1}</th>\n                                <td>{item.station_name}</td>\n                                <td>{item.operator}</td>\n                                <td>\n                                  <p className=\"mb-0\"><b>VehicleVIN:</b>{item.vehicle_vin}</p>\n                                  <p className=\"mb-0\"><b>Regi.No.:</b>{item.registration_no}</p>\n                                </td>\n                                <td>\n                                    <p className=\"mb-0\"><b>QR Code: </b>{item.discharged_b1_qr_code}</p>                          \n                                </td>\n                                <td>\n                                    <p className=\"mb-0\"><b>QR Code: </b>{item.charged_b1_qr_code}</p>\n                                </td> \n                                <td>\n                                    <p className=\"mb-0\"><b>QR Code: </b>{item.discharged_b2_qr_code}</p> \n                                </td>\n                                <td>\n                                    <p className=\"mb-0\"><b>QR Code: </b>{item.charged_b2_qr_code}</p>\n                                </td>\n                                <td>{item.end_otp}</td>\n                              </tr>\n                            ):<tr>\n                                  <td className=\"text-center text-danger\" colSpan=\"9\">Data  Not  Found</td>\n                              </tr>\n                    }                            \n                  </tbody>\n                </Table>\n            </CardBody>\n          </Card>\n        </Colxx>\n      </Row>\n    </>\n  );\n};\n\nexport default Queue;\n"]},"metadata":{},"sourceType":"module"}