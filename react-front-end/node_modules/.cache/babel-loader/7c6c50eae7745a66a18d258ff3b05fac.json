{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\Shimyon\\\\Emoiss\\\\RiteshBhai\\\\cdzb\\\\chargezone-frontend-development\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"D:\\\\Shimyon\\\\Emoiss\\\\RiteshBhai\\\\cdzb\\\\chargezone-frontend-development\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:\\\\Shimyon\\\\Emoiss\\\\RiteshBhai\\\\cdzb\\\\chargezone-frontend-development\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Row,FormGroup,Card,CardBody,Label,Input,Button,Alert}from'reactstrap';import{Colxx,Separator}from'../../../components/common/CustomBootstrap';import{getCurrentUser}from'../../../helpers/Utils';import{updateOwnerAPI,getOwnerByIdAPI,adminRoot}from'../../../constants/defaultValues';import axios from'axios';import{useHistory,useLocation}from\"react-router-dom\";import{Formik}from'formik';import*as yup from'yup';const UpdateOwner=()=>{const history=useHistory();const location=useLocation();//states\nconst _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),ownerName=_useState2[0],setOwnerName=_useState2[1];const _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),contactEmail=_useState4[0],setContactEmail=_useState4[1];const _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),contactNumber=_useState6[0],setContactNumber=_useState6[1];const _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),address=_useState8[0],setAddress=_useState8[1];const _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),remark=_useState10[0],setRemark=_useState10[1];//state to disable button on click\nconst _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),buttonDisabled=_useState12[0],setButtonDisabled=_useState12[1];//alert states\nconst _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),alertVisible=_useState14[0],setAlertVisible=_useState14[1];const _useState15=useState(\"\"),_useState16=_slicedToArray(_useState15,2),alertMsg=_useState16[0],setAlertMsg=_useState16[1];const _useState17=useState(\"\"),_useState18=_slicedToArray(_useState17,2),alertColor=_useState18[0],setAlertColor=_useState18[1];useEffect(()=>{getOwnerByIdAPICall();},[]);//API calls\nconst getOwnerByIdAPICall=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var currentUser;return _regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:currentUser=getCurrentUser();_context.next=3;return axios.post(getOwnerByIdAPI,{owner_master_id:location.state.owner_master_id},{headers:{Authorization:\"Bearer \".concat(currentUser.token)}}).then(response=>{const responseData=response.data;if(responseData.status===1){setOwnerName(responseData.data.name);setContactEmail(JSON.parse(responseData.data.all_data).contact_email);setContactNumber(JSON.parse(responseData.data.all_data).contact_number);setAddress(JSON.parse(responseData.data.all_data).address);setRemark(responseData.data.remark);}else{ownerUpdatedAlert(responseData.msg);}}).catch(error=>{console.log(error);});case 3:case\"end\":return _context.stop();}},_callee);}));return function getOwnerByIdAPICall(){return _ref.apply(this,arguments);};}();const updateOwnerAPICall=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(params){var currentUser;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:setButtonDisabled(true);currentUser=getCurrentUser();_context2.next=4;return axios.post(updateOwnerAPI,params,{headers:{Authorization:\"Bearer \".concat(currentUser.token)}}).then(response=>{const responseData=response.data;if(responseData.status===1){history.push({pathname:adminRoot+'/pages/owner',state:{responseStatus:responseData.status,responseMsg:responseData.msg}});}else{setButtonDisabled(false);ownerUpdatedAlert(responseData.msg);}}).catch(error=>{setButtonDisabled(false);console.log(error);});case 4:case\"end\":return _context2.stop();}},_callee2);}));return function updateOwnerAPICall(_x){return _ref2.apply(this,arguments);};}();//helper methods\n//Alert helper methods\nconst ownerUpdatedAlert=msg=>{setAlertVisible(true);setAlertMsg(msg);setAlertColor(\"danger\");};const onDismissAlert=()=>{setAlertVisible(false);};//Form Validation Schema\nconst OwnerDetailsValidationSchema=yup.object().shape({name:yup.string().required(\"Owner Name is required\"),contact_email:yup.string().email(\"Invalid Email format\"),contact_number:yup.string().matches(/\\+?\\d[\\d -]{8,12}\\d/,\"Invalid contact number\").length(10,\"Invalid contact number length\")});return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Colxx,{xxs:\"12\"},/*#__PURE__*/React.createElement(\"span\",{className:\"page_title\"},\"Update Owner\"),/*#__PURE__*/React.createElement(\"a\",{href:\"owner\",className:\"btn-primary default btn-sm float-right\"},/*#__PURE__*/React.createElement(\"b\",null,/*#__PURE__*/React.createElement(\"i\",{className:\"glyph-icon simple-icon-list\"}),\" Owner List\")),/*#__PURE__*/React.createElement(Separator,{className:\"mb-5 mt-1\"}))),/*#__PURE__*/React.createElement(Formik,{enableReinitialize:true,initialValues:{name:ownerName,contact_email:contactEmail,contact_number:contactNumber,address:address,remark:remark},validationSchema:OwnerDetailsValidationSchema,onSubmit:values=>{const tempAllData={contact_email:values.contact_email,contact_number:values.contact_number,address:values.address};const params={owner_master_id:location.state.owner_master_id,name:values.name,all_data:JSON.stringify(tempAllData),remark:values.remark};updateOwnerAPICall(params);}},({handleChange,handleBlur,handleSubmit,values,touched,errors})=>/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Colxx,{xxs:\"12\",className:\"mb-4\"},/*#__PURE__*/React.createElement(Card,{className:\"mb-4\"},/*#__PURE__*/React.createElement(CardBody,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Colxx,{md:\"12\"},/*#__PURE__*/React.createElement(Alert,{color:alertColor,isOpen:alertVisible,toggle:onDismissAlert},alertMsg)),/*#__PURE__*/React.createElement(Colxx,{md:6},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,null,\"Name\"),/*#__PURE__*/React.createElement(Input,{type:\"text\",placeholder:\"Name\",name:\"name\",value:values.name,onChange:handleChange,onBlur:handleBlur,className:errors.name&&touched.name?\"input-error\":null}),errors.name&&touched.name&&/*#__PURE__*/React.createElement(\"span\",{className:\"error\"},errors.name))),/*#__PURE__*/React.createElement(Colxx,{md:6},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,null,\"Contact Email\"),/*#__PURE__*/React.createElement(Input,{type:\"text\",placeholder:\"Contact Email\",name:\"contact_email\",value:values.contact_email,onChange:handleChange,onBlur:handleBlur,className:errors.contact_email&&touched.contact_email?\"input-error\":null}),errors.contact_email&&touched.contact_email&&/*#__PURE__*/React.createElement(\"span\",{className:\"error\"},errors.contact_email))),/*#__PURE__*/React.createElement(Colxx,{md:6},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,null,\"Contact Number\"),/*#__PURE__*/React.createElement(Input,{type:\"text\",placeholder:\"Contact Number\",name:\"contact_number\",value:values.contact_number,onChange:handleChange,onBlur:handleBlur,className:errors.contact_number&&touched.contact_number?\"input-error\":null}),errors.contact_number&&touched.contact_number&&/*#__PURE__*/React.createElement(\"span\",{className:\"error\"},errors.contact_number))),/*#__PURE__*/React.createElement(Colxx,{md:6},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,null,\"Address\"),/*#__PURE__*/React.createElement(Input,{type:\"text\",placeholder:\"Address\",name:\"address\",value:values.address,onChange:handleChange,onBlur:handleBlur,className:errors.address&&touched.address?\"input-error\":null}))),/*#__PURE__*/React.createElement(Colxx,{md:6},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,null,\"Remark\"),/*#__PURE__*/React.createElement(Input,{type:\"text\",name:\"remark\",placeholder:\"Remark\",value:values.remark,onChange:handleChange,onBlur:handleBlur})))),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Colxx,{md:\"12\",className:\"text-center\"},/*#__PURE__*/React.createElement(Button,{color:\"primary\",className:\"default mr-2\",onClick:handleSubmit,disabled:buttonDisabled},/*#__PURE__*/React.createElement(\"b\",null,\"Update\")),/*#__PURE__*/React.createElement(Button,{color:\"light\",className:\"default\",onClick:()=>{history.goBack();}},/*#__PURE__*/React.createElement(\"b\",null,\"Cancel\")))))))))));};export default UpdateOwner;","map":{"version":3,"sources":["D:/Shimyon/Emoiss/RiteshBhai/cdzb/chargezone-frontend-development/src/views/app/pages/UpdateOwner.js"],"names":["React","useState","useEffect","Row","FormGroup","Card","CardBody","Label","Input","Button","Alert","Colxx","Separator","getCurrentUser","updateOwnerAPI","getOwnerByIdAPI","adminRoot","axios","useHistory","useLocation","Formik","yup","UpdateOwner","history","location","ownerName","setOwnerName","contactEmail","setContactEmail","contactNumber","setContactNumber","address","setAddress","remark","setRemark","buttonDisabled","setButtonDisabled","alertVisible","setAlertVisible","alertMsg","setAlertMsg","alertColor","setAlertColor","getOwnerByIdAPICall","currentUser","post","owner_master_id","state","headers","Authorization","token","then","response","responseData","data","status","name","JSON","parse","all_data","contact_email","contact_number","ownerUpdatedAlert","msg","catch","error","console","log","updateOwnerAPICall","params","push","pathname","responseStatus","responseMsg","onDismissAlert","OwnerDetailsValidationSchema","object","shape","string","required","email","matches","length","values","tempAllData","stringify","handleChange","handleBlur","handleSubmit","touched","errors","goBack"],"mappings":"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","sourcesContent":["import React,{useState,useEffect} from 'react';\nimport { \n  Row, FormGroup, Card, CardBody,\n  Label,Input, Button,Alert\n } from 'reactstrap';\nimport { Colxx, Separator } from '../../../components/common/CustomBootstrap';\nimport { getCurrentUser } from '../../../helpers/Utils'\nimport {updateOwnerAPI,getOwnerByIdAPI,adminRoot} from '../../../constants/defaultValues'\nimport axios from 'axios';\nimport { useHistory,useLocation } from \"react-router-dom\";\nimport {Formik} from 'formik';\nimport * as yup from 'yup';\n\n\nconst UpdateOwner = () => {\n  const history = useHistory();\n  const location = useLocation();\n\n  //states\n  const [ownerName,setOwnerName] = useState(\"\");\n  const [contactEmail,setContactEmail] = useState(\"\");\n  const [contactNumber,setContactNumber] = useState(\"\");\n  const [address,setAddress] = useState(\"\");\n  const [remark,setRemark] = useState(\"\");\n  //state to disable button on click\n  const [buttonDisabled,setButtonDisabled] = useState(false);\n  //alert states\n  const [alertVisible,setAlertVisible] = useState(false);\n  const [alertMsg,setAlertMsg] = useState(\"\");\n  const [alertColor,setAlertColor] = useState(\"\");\n\n  useEffect(()=>{\n      getOwnerByIdAPICall();\n  },[])\n\n  //API calls\n    const getOwnerByIdAPICall = async() => {\n        const currentUser = getCurrentUser();\n        await axios.post(getOwnerByIdAPI,\n        {\n            owner_master_id:location.state.owner_master_id\n        },\n        {headers:{Authorization: `Bearer ${currentUser.token}`}})\n        .then(response=>{\n            const responseData = response.data;\n            if (responseData.status === 1) {\n            setOwnerName(responseData.data.name);\n            setContactEmail(JSON.parse(responseData.data.all_data).contact_email);\n            setContactNumber(JSON.parse(responseData.data.all_data).contact_number);\n            setAddress(JSON.parse(responseData.data.all_data).address);\n            setRemark(responseData.data.remark);\n            }else{\n              ownerUpdatedAlert(responseData.msg);\n            }\n        }).catch(error=>{\n            console.log(error);\n        })\n    }\n\n    const updateOwnerAPICall = async(params) => {\n        setButtonDisabled(true);\n        const currentUser = getCurrentUser();\n        await axios.post(updateOwnerAPI,\n        params,\n        {headers:{Authorization: `Bearer ${currentUser.token}`}})\n        .then(response=>{\n            const responseData = response.data;\n            if (responseData.status === 1) {\n              history.push({\n                pathname:adminRoot+'/pages/owner',\n                state:{\n                  responseStatus:responseData.status,\n                  responseMsg:responseData.msg\n                }\n              })\n            }else{\n              setButtonDisabled(false);\n              ownerUpdatedAlert(responseData.msg);\n            }\n        }).catch(error=>{\n            setButtonDisabled(false);\n            console.log(error);\n        })\n    }\n\n  //helper methods\n  //Alert helper methods\n  const ownerUpdatedAlert = (msg)=>{\n    setAlertVisible(true);\n    setAlertMsg(msg);\n    setAlertColor(\"danger\");\n  }\n  const onDismissAlert = ()=>{\n    setAlertVisible(false);\n  }\n  //Form Validation Schema\n  const OwnerDetailsValidationSchema = yup.object().shape({\n    name:yup.string()\n        .required(\"Owner Name is required\"),\n    contact_email:yup.string()\n        .email(\"Invalid Email format\"),\n    contact_number:yup.string()\n        .matches(/\\+?\\d[\\d -]{8,12}\\d/,\"Invalid contact number\")\n        .length(10,\"Invalid contact number length\")\n  });\n\n  return (\n    <>\n      <Row>\n        <Colxx xxs=\"12\">\n            <span className=\"page_title\">Update Owner</span>\n            <a href=\"owner\" className=\"btn-primary default btn-sm float-right\">\n                <b><i className=\"glyph-icon simple-icon-list\"></i> Owner List</b>\n            </a>\n          <Separator className=\"mb-5 mt-1\" />\n        </Colxx>\n      </Row>\n      <Formik\n      enableReinitialize ={true}\n        initialValues={{\n            name:ownerName,\n            contact_email:contactEmail,\n            contact_number:contactNumber,\n            address:address,\n            remark:remark\n        }}\n        validationSchema={OwnerDetailsValidationSchema} \n        onSubmit={(values)=>{\n          const tempAllData = {\n            contact_email:values.contact_email,\n            contact_number:values.contact_number,\n            address:values.address,\n          }\n          const params = {\n              owner_master_id:location.state.owner_master_id,\n              name:values.name,\n              all_data:JSON.stringify(tempAllData),\n              remark:values.remark\n          }\n          updateOwnerAPICall(params);\n        }} >\n          {({handleChange,handleBlur,handleSubmit,values,touched,errors})=>(\n            <>\n              <Row>\n                <Colxx xxs=\"12\" className=\"mb-4\">\n                  <Card className=\"mb-4\">\n                      <CardBody> \n                          <Row>\n                            <Colxx md=\"12\">\n                              <Alert color={alertColor} isOpen={alertVisible} toggle={onDismissAlert}>\n                                {alertMsg}\n                              </Alert>\n                            </Colxx>\n                            <Colxx md={6}>\n                              <FormGroup>\n                                <Label>\n                                    Name\n                                </Label>\n                                <Input\n                                  type=\"text\"\n                                  placeholder=\"Name\"\n                                  name=\"name\"\n                                  value={values.name}\n                                  onChange={handleChange}\n                                  onBlur={handleBlur}\n                                  className={errors.name && touched.name ? \"input-error\":null}\n                                />\n                                {errors.name && touched.name &&(\n                                  <span className=\"error\">{errors.name}</span>\n                                )}\n                              </FormGroup>\n                            </Colxx>\n                            <Colxx md={6}>\n                              <FormGroup>\n                                <Label>\n                                  Contact Email\n                                </Label>\n                                <Input\n                                  type=\"text\"\n                                  placeholder=\"Contact Email\"\n                                  name=\"contact_email\"\n                                  value={values.contact_email}\n                                  onChange={handleChange}\n                                  onBlur={handleBlur}\n                                  className={errors.contact_email && touched.contact_email ? \"input-error\":null}\n                                />\n                                {errors.contact_email && touched.contact_email &&(\n                                  <span className=\"error\">{errors.contact_email}</span>\n                                )}\n                              </FormGroup>\n                            </Colxx>\n                            <Colxx md={6}>\n                              <FormGroup>\n                                <Label>\n                                  Contact Number\n                                </Label>\n                                <Input\n                                  type=\"text\"\n                                  placeholder=\"Contact Number\"\n                                  name=\"contact_number\"\n                                  value={values.contact_number}\n                                  onChange={handleChange}\n                                  onBlur={handleBlur}\n                                  className={errors.contact_number && touched.contact_number ? \"input-error\":null}\n                                />\n                                {errors.contact_number && touched.contact_number &&(\n                                  <span className=\"error\">{errors.contact_number}</span>\n                                )}\n                              </FormGroup>\n                            </Colxx>\n                            <Colxx md={6}>\n                              <FormGroup>\n                                <Label>\n                                  Address\n                                </Label>\n                                <Input\n                                  type=\"text\"\n                                  placeholder=\"Address\"\n                                  name=\"address\"\n                                  value={values.address}\n                                  onChange={handleChange}\n                                  onBlur={handleBlur}\n                                  className={errors.address && touched.address ? \"input-error\":null}\n                                />\n                              </FormGroup>\n                            </Colxx>\n                            <Colxx md={6}>\n                              <FormGroup>\n                                <Label>\n                                  Remark\n                                </Label>\n                                <Input\n                                  type=\"text\"\n                                  name=\"remark\"\n                                  placeholder=\"Remark\"\n                                  value={values.remark}\n                                  onChange={handleChange}\n                                  onBlur={handleBlur}\n                                />\n                              </FormGroup>\n                            </Colxx>\n                          </Row>\n                          <Row>\n                            <Colxx md=\"12\" className=\"text-center\">\n                              <Button color=\"primary\" className=\"default mr-2\" onClick={handleSubmit} disabled={buttonDisabled}>\n                                  <b>Update</b>\n                              </Button>\n                              <Button color=\"light\" className=\"default\" onClick={()=>{history.goBack()}}>\n                                  <b>Cancel</b>\n                              </Button>\n                            </Colxx>\n                          </Row>\n                      </CardBody>\n                      </Card>\n                </Colxx>\n              </Row>\n            </>\n          )}\n      </Formik>  \n    </>\n  );\n};\n\nexport default UpdateOwner;"]},"metadata":{},"sourceType":"module"}