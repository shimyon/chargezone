{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\Shimyon\\\\Emoiss\\\\RiteshBhai\\\\cdzb\\\\chargezone\\\\react-front-end\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"D:\\\\Shimyon\\\\Emoiss\\\\RiteshBhai\\\\cdzb\\\\chargezone\\\\react-front-end\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:\\\\Shimyon\\\\Emoiss\\\\RiteshBhai\\\\cdzb\\\\chargezone\\\\react-front-end\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{Row,Card,CardBody,Modal,ModalHeader,ModalBody,ModalFooter,Table,Button,DropdownItem,DropdownMenu,DropdownToggle,Alert,UncontrolledDropdown,FormGroup,Label,Input,InputGroup}from'reactstrap';import{Colxx,Separator}from'../../../components/common/CustomBootstrap';import{getCurrentUser}from'../../../helpers/Utils';import{getStationsAPI,getEvInventoryByIdAPI,getEvMappingAPI,mapEvAPI}from'../../../constants/defaultValues';import axios from'axios';const Evmapping=()=>{//default values in modal\nconst _useState=useState([]),_useState2=_slicedToArray(_useState,2),evData=_useState2[0],setEvData=_useState2[1];const _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),stationNameData=_useState4[0],setStationNameData=_useState4[1];const _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),remark1=_useState6[0],setRemark1=_useState6[1];const _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),remark2=_useState8[0],setRemark2=_useState8[1];const _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),selectedHub=_useState10[0],setSelectedHub=_useState10[1];const _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),updateEvMappingId=_useState12[0],setUpdateEvMappingId=_useState12[1];// list state\nconst _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),evList=_useState14[0],setEvList=_useState14[1];const _useState15=useState(\"All Ev\"),_useState16=_slicedToArray(_useState15,2),evType=_useState16[0],setEvType=_useState16[1];const _useState17=useState(0),_useState18=_slicedToArray(_useState17,2),deleteEvMappingId=_useState18[0],setDeleteEvMappingId=_useState18[1];const _useState19=useState(0),_useState20=_slicedToArray(_useState19,2),isUpdate=_useState20[0],setIsUpdate=_useState20[1];//alert states\nconst _useState21=useState(false),_useState22=_slicedToArray(_useState21,2),alertVisible=_useState22[0],setAlertVisible=_useState22[1];const _useState23=useState(\"\"),_useState24=_slicedToArray(_useState23,2),alertMsg=_useState24[0],setAlertMsg=_useState24[1];const _useState25=useState(\"\"),_useState26=_slicedToArray(_useState25,2),alertColor=_useState26[0],setAlertColor=_useState26[1];//search state\nconst _useState27=useState(\"\"),_useState28=_slicedToArray(_useState27,2),searchBy=_useState28[0],setSearchBy=_useState28[1];//Pagination states\nconst _useState29=useState(\"1\"),_useState30=_slicedToArray(_useState29,2),pageCount=_useState30[0],setPageCount=_useState30[1];const _useState31=useState(\"1\"),_useState32=_slicedToArray(_useState31,2),lastPageCount=_useState32[0],setLastPageCount=_useState32[1];//Modal States\nconst _useState33=useState(false),_useState34=_slicedToArray(_useState33,2),modalVisible=_useState34[0],setModalVisible=_useState34[1];const _useState35=useState(false),_useState36=_slicedToArray(_useState35,2),modalUpdateVisible=_useState36[0],setModalUpdateVisible=_useState36[1];const _useState37=useState(true),_useState38=_slicedToArray(_useState37,2),isLoading=_useState38[0],setIsLoading=_useState38[1];//alert states for update modal\nconst _useState39=useState(false),_useState40=_slicedToArray(_useState39,2),alertModalVisible=_useState40[0],setAlertModalVisible=_useState40[1];const _useState41=useState(\"\"),_useState42=_slicedToArray(_useState41,2),alertModalMsg=_useState42[0],setAlertModalMsg=_useState42[1];const _useState43=useState(\"\"),_useState44=_slicedToArray(_useState43,2),alertModalColor=_useState44[0],setAlertModalColor=_useState44[1];useEffect(()=>{getEvMappingAPICall();},[isUpdate,pageCount,evType]);//API CALLS\nconst getEvMappingAPICall=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var currentUser;return _regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:setIsLoading(true);currentUser=getCurrentUser();_context.next=4;return axios.get(getEvMappingAPI+pageCount+\"&ev_type=\"+evType+\"&search_param=\"+searchBy,{headers:{Authorization:\"Bearer \".concat(currentUser.token)}}).then(response=>{const responseData=response.data;if(responseData.status===1){setLastPageCount(responseData.data.last_page);setEvList(responseData.data.data);}else{console.log(responseData.msg);setEvList([]);}setIsLoading(false);}).catch(error=>{console.log(error);});case 4:case\"end\":return _context.stop();}},_callee);}));return function getEvMappingAPICall(){return _ref.apply(this,arguments);};}();const GetStationNamesAPICall=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var currentUser;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:currentUser=getCurrentUser();_context2.next=3;return axios.get(getStationsAPI,{headers:{Authorization:\"Bearer \".concat(currentUser.token)}}).then(response=>{const responseData=response.data;if(responseData.status===1){setStationNameData(responseData.data);}else{console.log(responseData.msg);}}).catch(error=>{console.log(error);});case 3:case\"end\":return _context2.stop();}},_callee2);}));return function GetStationNamesAPICall(){return _ref2.apply(this,arguments);};}();const getEvInventoryByIdAPICall=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(evInventoryId){var currentUser;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:currentUser=getCurrentUser();_context3.next=3;return axios.post(getEvInventoryByIdAPI,{ev_inventory_id:evInventoryId},{headers:{Authorization:\"Bearer \".concat(currentUser.token)}}).then(response=>{const responseData=response.data;if(responseData.status===1){setEvData(responseData.data);setSelectedHub(responseData.data.hub_id);setRemark1(responseData.data.remark_1);setRemark2(responseData.data.remark_2);}else{console.log(responseData.msg);}}).catch(error=>{console.log(error);});case 3:case\"end\":return _context3.stop();}},_callee3);}));return function getEvInventoryByIdAPICall(_x){return _ref3.apply(this,arguments);};}();const mapEvAPICall=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(evMappingId,hubId,remark1,remark2){var currentUser;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:setModalVisible(false);setModalUpdateVisible(false);currentUser=getCurrentUser();_context4.next=5;return axios.post(mapEvAPI,{ev_inventory_id:evMappingId,hub_id:hubId,remark_1:remark1,remark_2:remark2},{headers:{Authorization:\"Bearer \".concat(currentUser.token)}}).then(response=>{const responseData=response.data;if(responseData.status===1){setIsUpdate(!isUpdate);if(hubId==0){evMappingDeletedAlert(responseData.status,\"EV Unmapped Successfully\");}else{evMappingDeletedAlert(responseData.status,responseData.msg);}}else{evMappingDeletedAlert(responseData.status,responseData.msg);}}).catch(error=>{console.log(error);});case 5:case\"end\":return _context4.stop();}},_callee4);}));return function mapEvAPICall(_x2,_x3,_x4,_x5){return _ref4.apply(this,arguments);};}();//pagination method\nconst renderPageList=()=>{const pageNumbers=[];for(let i=0;i<lastPageCount;i+=1){pageNumbers.push(/*#__PURE__*/React.createElement(DropdownItem,{key:i,onClick:()=>{setPageCount(i+1);}},i+1));}return pageNumbers;};//helper methods\n//Alert helper methods\nconst evMappingDeletedAlert=(status,msg)=>{setAlertVisible(true);setAlertMsg(msg);if(status===1){setAlertColor(\"success\");}else{setAlertColor(\"danger\");}};const evModalAlert=(status,msg)=>{setAlertModalVisible(true);setAlertModalMsg(msg);if(status===1){setAlertModalColor(\"success\");}else{setAlertModalColor(\"danger\");}};const onDismissAlert=()=>{setAlertVisible(false);};//Modal helper methods\nconst toggleModal=item=>{setRemark1(item.remark_1);setRemark2(item.remark_2);setDeleteEvMappingId(item.ev_inventory_id);setModalVisible(!modalVisible);};const toggleUpdateModal=item=>{GetStationNamesAPICall();getEvInventoryByIdAPICall(item.ev_inventory_id);setUpdateEvMappingId(item.ev_inventory_id);setModalUpdateVisible(!modalUpdateVisible);};// value input handle method\nconst updateEvMappingDetails=()=>{if(selectedHub!=0){console.log(\"mapped\");mapEvAPICall(updateEvMappingId,selectedHub,remark1,remark2);}else{evModalAlert(0,\"Station is required\");return;}};//handle search input\nconst handleSearch=()=>{setPageCount(1);getEvMappingAPICall();};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Colxx,{xxs:\"12\"},/*#__PURE__*/React.createElement(\"span\",{className:\"page_title\"},\"EV Mapping\"),/*#__PURE__*/React.createElement(Separator,{className:\"mb-5\"}))),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Colxx,{md:\"4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"ml-2 mb-2\"},/*#__PURE__*/React.createElement(InputGroup,null,/*#__PURE__*/React.createElement(Input,{type:\"text\",placeholder:\"Search\",value:searchBy,onChange:e=>setSearchBy(e.target.value)}),/*#__PURE__*/React.createElement(Button,{className:\"default search-icon\",color:\"primary\",outline:true,onClick:()=>handleSearch()},/*#__PURE__*/React.createElement(\"i\",{className:\"glyph-icon simple-icon-magnifier\"}))))),/*#__PURE__*/React.createElement(Colxx,{md:\"8\"},/*#__PURE__*/React.createElement(\"div\",{className:\"text-right mr-5 mb-2\"},/*#__PURE__*/React.createElement(\"span\",null,\"EV Type : \"),/*#__PURE__*/React.createElement(UncontrolledDropdown,{className:\"d-inline-block\"},/*#__PURE__*/React.createElement(DropdownToggle,{caret:true,color:\"outline-primary\",size:\"xs\",\"data-display\":\"static\"},evType),/*#__PURE__*/React.createElement(DropdownMenu,{className:\"dropdownMenu\"},/*#__PURE__*/React.createElement(DropdownItem,{onClick:()=>{setEvType('All Ev');setPageCount(1);}},\"All\"),/*#__PURE__*/React.createElement(DropdownItem,{onClick:()=>{setEvType('Mapped EV');setPageCount(1);}},\"Mapped EV\"),/*#__PURE__*/React.createElement(DropdownItem,{onClick:()=>{setEvType('Unmapped EV');setPageCount(1);}},\"Unmapped EV\"))),/*#__PURE__*/React.createElement(\"span\",{className:\"ml-5\"},\"Page \"),/*#__PURE__*/React.createElement(UncontrolledDropdown,{className:\"d-inline-block\"},/*#__PURE__*/React.createElement(DropdownToggle,{caret:true,color:\"outline-primary\",size:\"xs\",\"data-display\":\"static\"},pageCount),/*#__PURE__*/React.createElement(DropdownMenu,{className:\"dropdownMenu\"},renderPageList())),/*#__PURE__*/React.createElement(\"span\",null,\" of \"),lastPageCount))),/*#__PURE__*/React.createElement(Row,{className:\"mb-5\"},/*#__PURE__*/React.createElement(Colxx,{xxs:\"12\"},/*#__PURE__*/React.createElement(Alert,{color:alertColor,isOpen:alertVisible,toggle:onDismissAlert,className:\"mb-3\"},alertMsg),/*#__PURE__*/React.createElement(Card,{className:\"mb-4\"},/*#__PURE__*/React.createElement(CardBody,null,/*#__PURE__*/React.createElement(Table,{responsive:true,bordered:true,striped:true},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"#\"),/*#__PURE__*/React.createElement(\"th\",null,\"EV Id\"),/*#__PURE__*/React.createElement(\"th\",null,\"Swapping Station\"),/*#__PURE__*/React.createElement(\"th\",null,\"Remark1\"),/*#__PURE__*/React.createElement(\"th\",null,\"Remark2\"),/*#__PURE__*/React.createElement(\"th\",null,\"Action\"))),/*#__PURE__*/React.createElement(\"tbody\",null,isLoading?/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",{className:\"text-center\",colSpan:\"6\"},/*#__PURE__*/React.createElement(\"div\",{className:\"custom-list-loading\"}))):evList.length>0?evList.map((item,index)=>/*#__PURE__*/React.createElement(\"tr\",{key:item.ev_inventory_id},/*#__PURE__*/React.createElement(\"th\",{scope:\"row\"},pageCount==1?index+1:(pageCount-1)*10+index+1),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"p\",{className:\"mb-0\"},/*#__PURE__*/React.createElement(\"b\",null,\"QR Code: \"),item.e_qr_code),/*#__PURE__*/React.createElement(\"p\",{className:\"mb-0\"},/*#__PURE__*/React.createElement(\"b\",null,\"Vehicle Model: \"),item.vehicle_model),/*#__PURE__*/React.createElement(\"p\",{className:\"mb-0\"},/*#__PURE__*/React.createElement(\"b\",null,\"Vehicle Make: \"),item.vehicle_make),/*#__PURE__*/React.createElement(\"p\",{className:\"mb-0\"},/*#__PURE__*/React.createElement(\"b\",null,\"Vehicle Type: \"),item.vehicle_type)),/*#__PURE__*/React.createElement(\"td\",null,item.station_name),/*#__PURE__*/React.createElement(\"td\",null,item.remark_1),/*#__PURE__*/React.createElement(\"td\",null,item.remark_2),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(Button,{color:\"info\",className:\"default mr-1 btn-sm tbl_action_btn\",onClick:()=>toggleUpdateModal(item)},/*#__PURE__*/React.createElement(\"i\",{className:\"glyph-icon simple-icon-pencil\"})),item.hub_id>0&&/*#__PURE__*/React.createElement(Button,{color:\"danger\",className:\"default btn-sm tbl_action_btn\",onClick:()=>{toggleModal(item);}},/*#__PURE__*/React.createElement(\"i\",{className:\"glyph-icon simple-icon-trash\"}))))):/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",{className:\"text-center text-danger\",colSpan:\"6\"},\"Data  Not  Found\")))))))),/*#__PURE__*/React.createElement(Modal,{isOpen:modalVisible,toggle:toggleModal},/*#__PURE__*/React.createElement(ModalHeader,{className:\"text-center\"},\"Are you sure you would like to unmap this ev?\",/*#__PURE__*/React.createElement(Button,{color:\"success\",className:\"mt-4\",onClick:()=>mapEvAPICall(deleteEvMappingId,0,remark1,remark2)},\"Unmap\"),' ',/*#__PURE__*/React.createElement(Button,{color:\"danger\",className:\"mt-4 mr-2\",onClick:toggleModal},\"Cancel\"))),/*#__PURE__*/React.createElement(Modal,{isOpen:modalUpdateVisible,toggle:toggleUpdateModal},/*#__PURE__*/React.createElement(ModalHeader,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Colxx,{md:\"12\",className:\"mt-2 text-center\"},\"Update details\"))),/*#__PURE__*/React.createElement(ModalBody,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Colxx,{md:\"12\"},/*#__PURE__*/React.createElement(Alert,{color:alertModalColor,isOpen:alertModalVisible,toggle:()=>setAlertModalVisible(false)},alertModalMsg)),/*#__PURE__*/React.createElement(Colxx,{sm:12},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(\"h5\",null,\"EV details\"),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Colxx,{md:12},/*#__PURE__*/React.createElement(\"b\",null,\"Vehicle Vin : \"),evData.vehicle_vin),/*#__PURE__*/React.createElement(Colxx,{md:12},/*#__PURE__*/React.createElement(\"b\",null,\"QR Code : \"),evData.e_qr_code)))),/*#__PURE__*/React.createElement(Colxx,{md:12},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,null,\"Swapping Station\"),/*#__PURE__*/React.createElement(Input,{type:\"select\",name:\"hub_id\",placeholder:\"Station\",value:selectedHub,onChange:e=>{setSelectedHub(e.target.value);}},/*#__PURE__*/React.createElement(\"option\",{value:\"0\"},\"Select Station\"),stationNameData.map(item=>/*#__PURE__*/React.createElement(\"option\",{value:item.hub_master_id,key:item.hub_master_id},item.name))))),/*#__PURE__*/React.createElement(Colxx,{md:12,sm:12},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,null,\"Remark1\"),/*#__PURE__*/React.createElement(Input,{type:\"text\",placeholder:\"Remark1\",value:remark1,onChange:e=>{setRemark1(e.target.value);}}))),/*#__PURE__*/React.createElement(Colxx,{md:12,sm:12},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,null,\"Remark2\"),/*#__PURE__*/React.createElement(Input,{type:\"text\",placeholder:\"Remark2\",value:remark2,onChange:e=>{setRemark2(e.target.value);}}))))),/*#__PURE__*/React.createElement(ModalFooter,null,/*#__PURE__*/React.createElement(Button,{color:\"success\",className:\"mt-4\",onClick:()=>updateEvMappingDetails()},\"Map\"),' ',/*#__PURE__*/React.createElement(Button,{color:\"danger\",className:\"mt-4 mr-2\",onClick:toggleUpdateModal},\"Cancel\"))));};export default Evmapping;","map":{"version":3,"sources":["D:/Shimyon/Emoiss/RiteshBhai/cdzb/chargezone/react-front-end/src/views/app/mapping/Evmapping.js"],"names":["React","useEffect","useState","Row","Card","CardBody","Modal","ModalHeader","ModalBody","ModalFooter","Table","Button","DropdownItem","DropdownMenu","DropdownToggle","Alert","UncontrolledDropdown","FormGroup","Label","Input","InputGroup","Colxx","Separator","getCurrentUser","getStationsAPI","getEvInventoryByIdAPI","getEvMappingAPI","mapEvAPI","axios","Evmapping","evData","setEvData","stationNameData","setStationNameData","remark1","setRemark1","remark2","setRemark2","selectedHub","setSelectedHub","updateEvMappingId","setUpdateEvMappingId","evList","setEvList","evType","setEvType","deleteEvMappingId","setDeleteEvMappingId","isUpdate","setIsUpdate","alertVisible","setAlertVisible","alertMsg","setAlertMsg","alertColor","setAlertColor","searchBy","setSearchBy","pageCount","setPageCount","lastPageCount","setLastPageCount","modalVisible","setModalVisible","modalUpdateVisible","setModalUpdateVisible","isLoading","setIsLoading","alertModalVisible","setAlertModalVisible","alertModalMsg","setAlertModalMsg","alertModalColor","setAlertModalColor","getEvMappingAPICall","currentUser","get","headers","Authorization","token","then","response","responseData","data","status","last_page","console","log","msg","catch","error","GetStationNamesAPICall","getEvInventoryByIdAPICall","evInventoryId","post","ev_inventory_id","hub_id","remark_1","remark_2","mapEvAPICall","evMappingId","hubId","evMappingDeletedAlert","renderPageList","pageNumbers","i","push","evModalAlert","onDismissAlert","toggleModal","item","toggleUpdateModal","updateEvMappingDetails","handleSearch","e","target","value","length","map","index","e_qr_code","vehicle_model","vehicle_make","vehicle_type","station_name","vehicle_vin","hub_master_id","name"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Row, Card, CardBody,\n  Modal,ModalHeader, ModalBody, ModalFooter,\n  Table, Button, \n  DropdownItem,DropdownMenu,DropdownToggle,\n  Alert,\n  UncontrolledDropdown,\n  FormGroup,\n  Label,\n  Input,InputGroup \n} from 'reactstrap';\nimport { Colxx, Separator } from '../../../components/common/CustomBootstrap';\nimport {getCurrentUser} from '../../../helpers/Utils';\nimport {getStationsAPI,getEvInventoryByIdAPI,getEvMappingAPI,mapEvAPI} from '../../../constants/defaultValues';\nimport axios from 'axios';\n\nconst Evmapping = () => {\n  //default values in modal\n  const [evData,setEvData] = useState([]);\n  const [stationNameData,setStationNameData] = useState([]);\n  const [remark1,setRemark1] = useState(\"\");\n  const [remark2,setRemark2] = useState(\"\");\n  const [selectedHub, setSelectedHub] = useState([]);\n  const [updateEvMappingId,setUpdateEvMappingId] = useState(false);\n  // list state\n  const [evList,setEvList] = useState([]);\n  const [evType,setEvType] = useState(\"All Ev\");\n  const [deleteEvMappingId,setDeleteEvMappingId] = useState(0);\n  const [isUpdate,setIsUpdate] = useState(0);\n  //alert states\n  const [alertVisible,setAlertVisible] = useState(false);\n  const [alertMsg,setAlertMsg] = useState(\"\");\n  const [alertColor,setAlertColor] = useState(\"\");\n  //search state\n  const [searchBy,setSearchBy] = useState(\"\");\n  //Pagination states\n  const [pageCount,setPageCount] = useState(\"1\");\n  const [lastPageCount,setLastPageCount] = useState(\"1\");\n  //Modal States\n  const [modalVisible,setModalVisible] = useState(false);\n  const [modalUpdateVisible,setModalUpdateVisible] = useState(false);\n  const [isLoading,setIsLoading] = useState(true);\n  //alert states for update modal\n  const [alertModalVisible,setAlertModalVisible] = useState(false);\n  const [alertModalMsg,setAlertModalMsg] = useState(\"\");\n  const [alertModalColor,setAlertModalColor] = useState(\"\");\n\n  useEffect(()=>{\n    getEvMappingAPICall();\n  },[isUpdate,pageCount,evType]);\n\n  //API CALLS\n  const getEvMappingAPICall = async() => {\n    setIsLoading(true);\n    const currentUser = getCurrentUser();\n    await axios.get(getEvMappingAPI+pageCount+\"&ev_type=\"+evType+`&search_param=`+searchBy,\n      {headers:{Authorization: `Bearer ${currentUser.token}`}})\n      .then(response=>{\n        const responseData = response.data;\n        if (responseData.status === 1) {\n          setLastPageCount(responseData.data.last_page)\n          setEvList(responseData.data.data);\n        }else{\n          console.log(responseData.msg);\n          setEvList([]);\n        }\n        setIsLoading(false);\n      }).catch(error=>{\n        console.log(error);\n      })\n  }\n  const GetStationNamesAPICall = async() => {\n    const currentUser = getCurrentUser();\n    await axios.get(getStationsAPI,\n    {headers:{Authorization: `Bearer ${currentUser.token}`}})\n    .then(response=>{\n      const responseData = response.data;\n      if (responseData.status === 1) {\n        setStationNameData(responseData.data)\n      }else{\n        console.log(responseData.msg);\n      }\n    }).catch(error=>{\n      console.log(error);\n    })\n  }\n  const getEvInventoryByIdAPICall = async(evInventoryId) => {\n    const currentUser = getCurrentUser();\n    await axios.post(getEvInventoryByIdAPI,\n      {ev_inventory_id:evInventoryId},\n      {headers:{Authorization: `Bearer ${currentUser.token}`}})\n      .then(response=>{\n        const responseData = response.data;\n        if (responseData.status === 1) {\n          setEvData(responseData.data);\n          setSelectedHub(responseData.data.hub_id);\n          setRemark1(responseData.data.remark_1);\n          setRemark2(responseData.data.remark_2)\n        }else{\n          console.log(responseData.msg);\n        }\n      }).catch(error=>{\n        console.log(error);\n      });   \n  }\n  const mapEvAPICall = async(evMappingId,hubId,remark1,remark2) =>{\n    setModalVisible(false);\n    setModalUpdateVisible(false);\n    const currentUser = getCurrentUser();\n    await axios.post(mapEvAPI,\n      {ev_inventory_id:evMappingId,hub_id:hubId,remark_1:remark1,remark_2:remark2},\n      {headers:{Authorization: `Bearer ${currentUser.token}`}})\n      .then(response=>{\n          const responseData = response.data;\n          if (responseData.status === 1) {\n            setIsUpdate(!isUpdate);\n            if (hubId==0) {\n              evMappingDeletedAlert(responseData.status,\"EV Unmapped Successfully\") \n            } else {\n              evMappingDeletedAlert(responseData.status,responseData.msg) \n            }\n          } else {\n            evMappingDeletedAlert(responseData.status,responseData.msg)\n          }\n      }).catch(error=>{\n        console.log(error);\n      })\n  }\n  //pagination method\n  const renderPageList = () => {\n    const pageNumbers = [];\n    for (let i = 0; i <lastPageCount; i += 1) {\n      pageNumbers.push(\n        <DropdownItem key={i} onClick={() => {setPageCount(i+1)}}>\n          {i+1}\n        </DropdownItem>\n      );\n    }\n    return pageNumbers;\n  };\n\n  //helper methods\n  //Alert helper methods\n  const evMappingDeletedAlert = (status,msg)=>{\n    setAlertVisible(true);\n    setAlertMsg(msg);\n    if (status === 1) {\n      setAlertColor(\"success\");\n    } else {\n      setAlertColor(\"danger\");\n    }              \n  }\n  const evModalAlert = (status,msg)=>{\n    setAlertModalVisible(true);\n    setAlertModalMsg(msg);\n    if (status === 1) {\n      setAlertModalColor(\"success\");\n    } else {\n      setAlertModalColor(\"danger\");\n    }              \n  }\n  const onDismissAlert = ()=>{\n    setAlertVisible(false);\n  }\n  //Modal helper methods\n  const toggleModal = (item) => {\n    setRemark1(item.remark_1);\n    setRemark2(item.remark_2);\n    setDeleteEvMappingId(item.ev_inventory_id);\n    setModalVisible(!modalVisible);\n  }\n  const toggleUpdateModal = (item) => {\n    GetStationNamesAPICall();\n    getEvInventoryByIdAPICall(item.ev_inventory_id);\n    setUpdateEvMappingId(item.ev_inventory_id);\n    setModalUpdateVisible(!modalUpdateVisible);\n  }\n  // value input handle method\n  const updateEvMappingDetails = () =>{\n    if (selectedHub !=0) {\n      console.log(\"mapped\");\n      mapEvAPICall(updateEvMappingId,selectedHub,remark1,remark2)\n    } else {\n      evModalAlert(0,\"Station is required\");\n      return;  \n    } \n  }\n   //handle search input\n   const handleSearch = () => {\n      setPageCount(1);\n      getEvMappingAPICall();\n  }\n  \n  return (\n    <>\n      <Row>\n        <Colxx xxs=\"12\">\n            <span className=\"page_title\">EV Mapping</span>\n            <Separator className=\"mb-5\" />\n        </Colxx>\n      </Row>\n      <Row>\n        <Colxx md=\"4\">\n          <div className=\"ml-2 mb-2\">\n            <InputGroup>\n            <Input \n            type=\"text\" \n            placeholder=\"Search\"\n            value={searchBy}\n            onChange={e=>setSearchBy(e.target.value)}/>\n            <Button className=\"default search-icon\" color=\"primary\" outline onClick={()=>handleSearch()}><i className=\"glyph-icon simple-icon-magnifier\"></i></Button>\n            </InputGroup>  \n          </div>\n        </Colxx>\n        <Colxx md=\"8\">\n          <div className=\"text-right mr-5 mb-2\">\n              <span>EV Type : </span>\n              <UncontrolledDropdown className=\"d-inline-block\">\n                <DropdownToggle caret color=\"outline-primary\" size=\"xs\" data-display=\"static\">\n                  {evType}\n                </DropdownToggle>\n                <DropdownMenu className=\"dropdownMenu\">\n                    <DropdownItem onClick={() => {setEvType('All Ev');setPageCount(1)}}>All</DropdownItem>\n                    <DropdownItem onClick={() => {setEvType('Mapped EV');setPageCount(1)}}>Mapped EV</DropdownItem>\n                    <DropdownItem onClick={() => {setEvType('Unmapped EV');setPageCount(1)}}>Unmapped EV</DropdownItem>\n                </DropdownMenu>\n              </UncontrolledDropdown>\n              <span className=\"ml-5\">Page </span>\n              <UncontrolledDropdown className=\"d-inline-block\">\n                <DropdownToggle caret color=\"outline-primary\" size=\"xs\" data-display=\"static\">\n                  {pageCount}\n                </DropdownToggle>\n                <DropdownMenu className=\"dropdownMenu\">\n                  {renderPageList()}\n                </DropdownMenu>\n              </UncontrolledDropdown>\n              <span> of </span>\n              {lastPageCount}              \n            </div>\n        </Colxx>\n      </Row>\n      <Row className=\"mb-5\">\n        <Colxx xxs=\"12\">\n          <Alert color={alertColor} isOpen={alertVisible} toggle={onDismissAlert} className=\"mb-3\">\n            {alertMsg}\n          </Alert>\n          <Card className=\"mb-4\">\n            <CardBody>\n              <Table responsive bordered striped>\n                <thead>\n                  <tr>\n                    <th>#</th>\n                    <th>EV Id</th>\n                    <th>Swapping Station</th>\n                    <th>Remark1</th>\n                    <th>Remark2</th>\n                    <th>Action</th>\n                  </tr>\n                </thead>\n                <tbody>\n                {isLoading ?\n                  <tr>\n                      <td className=\"text-center\" colSpan=\"6\"><div className=\"custom-list-loading\" /></td>\n                  </tr> : \n                  (evList.length > 0)?\n                    evList.map((item,index)=>\n                      <tr key={item.ev_inventory_id}>\n                        <th scope=\"row\">{pageCount==1?index+1:(pageCount-1)*10+index+1}</th>\n                        <td>\n                            <p className=\"mb-0\"><b>QR Code: </b>{item.e_qr_code}</p>\n                            <p className=\"mb-0\"><b>Vehicle Model: </b>{item.vehicle_model}</p>\n                            <p className=\"mb-0\"><b>Vehicle Make: </b>{item.vehicle_make}</p>\n                            <p className=\"mb-0\"><b>Vehicle Type: </b>{item.vehicle_type}</p> \n                        </td>\n                        <td>{item.station_name}</td>\n                        <td>{item.remark_1}</td>\n                        <td>{item.remark_2}</td>\n                        <td>\n                          <Button color=\"info\" className=\"default mr-1 btn-sm tbl_action_btn\" onClick={()=>toggleUpdateModal(item)}>\n                              <i className=\"glyph-icon simple-icon-pencil\"></i>\n                          </Button>\n                          {(item.hub_id > 0) && \n                          <Button color=\"danger\" className=\"default btn-sm tbl_action_btn\" onClick={()=>{toggleModal(item)}}>\n                              <i className=\"glyph-icon simple-icon-trash\"></i>\n                          </Button>}\n                          \n                        </td>\n                      </tr>\n                    ):<tr>\n                        <td className=\"text-center text-danger\" colSpan=\"6\">Data  Not  Found</td>\n                    </tr>\n                  }\n                </tbody>\n              </Table>\n            </CardBody>\n          </Card>\n        </Colxx>\n      </Row>\n      <Modal\n        isOpen={modalVisible}\n        toggle={toggleModal} >\n        <ModalHeader className=\"text-center\">\n          Are you sure you would like to unmap this ev?\n          <Button color=\"success\" className=\"mt-4\" onClick={()=>mapEvAPICall(deleteEvMappingId,0,remark1,remark2)}>\n            Unmap\n          </Button>{' '}\n          <Button color=\"danger\" className=\"mt-4 mr-2\" onClick={toggleModal}>\n            Cancel\n          </Button>\n        </ModalHeader>\n      </Modal>\n      <Modal\n        isOpen={modalUpdateVisible}\n        toggle={toggleUpdateModal} >\n          <ModalHeader>\n            <Row>\n              <Colxx md=\"12\" className=\"mt-2 text-center\">\n              Update details\n              </Colxx>\n            </Row>\n          </ModalHeader>  \n          <ModalBody>\n            <Row>\n              <Colxx md=\"12\">\n                <Alert color={alertModalColor} isOpen={alertModalVisible} toggle={()=>setAlertModalVisible(false)}>\n                  {alertModalMsg}\n                </Alert>\n              </Colxx>\n              <Colxx sm={12}>\n                <FormGroup>\n                  <h5>\n                  EV details\n                  </h5>\n                  <Row>\n                    <Colxx md={12}>\n                      <b>Vehicle Vin : </b>{evData.vehicle_vin}\n                    </Colxx>\n                    <Colxx md={12}>\n                      <b>QR Code : </b>{evData.e_qr_code}\n                    </Colxx>\n                  </Row>  \n                </FormGroup>\n              </Colxx>\n              <Colxx md={12}>\n                <FormGroup>\n                  <Label>\n                  Swapping Station\n                  </Label>\n                  <Input \n                  type=\"select\" \n                  name=\"hub_id\" \n                  placeholder=\"Station\"\n                  value={selectedHub} onChange={(e)=>{setSelectedHub(e.target.value)}}>\n                    <option value=\"0\">Select Station</option>\n                    {stationNameData.map((item)=>\n                      <option value={item.hub_master_id} key={item.hub_master_id}>{item.name}</option>\n                    )}\n                  </Input>\n                </FormGroup>\n              </Colxx>\n              <Colxx md={12} sm={12}>\n                <FormGroup>\n                  <Label>\n                  Remark1\n                  </Label>\n                  <Input\n                    type=\"text\"\n                    placeholder=\"Remark1\"\n                    value={remark1}\n                    onChange={(e)=>{setRemark1(e.target.value)}}\n                  />\n                </FormGroup>\n              </Colxx>\n              <Colxx md={12} sm={12}>\n                <FormGroup>\n                  <Label>\n                    Remark2\n                  </Label>\n                  <Input\n                    type=\"text\"\n                    placeholder=\"Remark2\"\n                    value={remark2}\n                    onChange={(e)=>{setRemark2(e.target.value)}}\n                  />\n                </FormGroup>\n              </Colxx>\n            </Row>\n          </ModalBody>\n          <ModalFooter>\n          <Button color=\"success\" className=\"mt-4\" onClick={()=>updateEvMappingDetails()}>\n              Map\n            </Button>{' '}\n            <Button color=\"danger\" className=\"mt-4 mr-2\" onClick={toggleUpdateModal}>\n              Cancel\n            </Button>\n          </ModalFooter>\n      </Modal>\n    </>\n  );\n};\nexport default Evmapping;\n"]},"metadata":{},"sourceType":"module"}