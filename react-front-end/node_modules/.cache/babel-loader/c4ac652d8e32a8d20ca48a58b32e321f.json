{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\Shimyon\\\\Emoiss\\\\RiteshBhai\\\\cdzb\\\\chargezone\\\\react-front-end\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"D:\\\\Shimyon\\\\Emoiss\\\\RiteshBhai\\\\cdzb\\\\chargezone\\\\react-front-end\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:\\\\Shimyon\\\\Emoiss\\\\RiteshBhai\\\\cdzb\\\\chargezone\\\\react-front-end\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{CardSubtitle,CardBody,Row,Table,Card,DropdownItem,DropdownMenu,DropdownToggle,UncontrolledDropdown,Input,InputGroup,Button,Alert}from'reactstrap';import{Colxx,Separator}from'../../../components/common/CustomBootstrap';import{getCurrentUser}from'../../../helpers/Utils';import{getTransactionAPI}from'../../../constants/defaultValues';import axios from'axios';const Transaction=()=>{const _useState=useState([]),_useState2=_slicedToArray(_useState,2),transactionList=_useState2[0],setTransactionList=_useState2[1];const _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1];//search state\nconst _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),searchBy=_useState6[0],setSearchBy=_useState6[1];//Pagination states\nconst _useState7=useState(\"1\"),_useState8=_slicedToArray(_useState7,2),pageCount=_useState8[0],setPageCount=_useState8[1];const _useState9=useState(\"1\"),_useState10=_slicedToArray(_useState9,2),lastPageCount=_useState10[0],setLastPageCount=_useState10[1];const status_val=['-','Scan EV','Scan DB1','Scan DB2','Scan OTP','Scan EV','Scan CB1','Scan CB2'];//alert states\nconst _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),alertVisible=_useState12[0],setAlertVisible=_useState12[1];const _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),alertMsg=_useState14[0],setAlertMsg=_useState14[1];const _useState15=useState(\"\"),_useState16=_slicedToArray(_useState15,2),alertColor=_useState16[0],setAlertColor=_useState16[1];useEffect(()=>{getTransactionAPICall();},[pageCount]);//API CALLS\nconst getTransactionAPICall=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var currentUser;return _regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:setIsLoading(true);currentUser=getCurrentUser();_context.next=4;return axios.get(getTransactionAPI+pageCount+\"&search_param=\"+searchBy,{headers:{Authorization:\"Bearer \".concat(currentUser.token)}}).then(response=>{const responseData=response.data;if(responseData.status===1){setLastPageCount(responseData.data.last_page);setTransactionList(responseData.data.data);}else{console.log(responseData.msg);}setIsLoading(false);}).catch(error=>{console.log(error);});case 4:case\"end\":return _context.stop();}},_callee);}));return function getTransactionAPICall(){return _ref.apply(this,arguments);};}();//helper methods\n//Alert helper methods\nconst transactionAlert=(status,msg)=>{setAlertVisible(true);setAlertMsg(msg);if(status===1){setAlertColor(\"success\");}else{setAlertColor(\"danger\");}};const onDismissAlert=()=>{setAlertVisible(false);};//pagination method\nconst renderPageList=()=>{const pageNumbers=[];for(let i=0;i<lastPageCount;i+=1){pageNumbers.push(/*#__PURE__*/React.createElement(DropdownItem,{key:i,onClick:()=>{setPageCount(i+1);}},i+1));}return pageNumbers;};//handle search input\nconst handleSearch=()=>{setPageCount(1);getTransactionAPICall();};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Colxx,{xxs:\"12\"},/*#__PURE__*/React.createElement(\"span\",{className:\"page_title\"},\"Transactions\"),/*#__PURE__*/React.createElement(Separator,{className:\"mb-5\"}))),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Colxx,{md:\"4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"ml-2 mb-2\"},/*#__PURE__*/React.createElement(InputGroup,null,/*#__PURE__*/React.createElement(Input,{type:\"text\",placeholder:\"Search\",value:searchBy,onChange:e=>setSearchBy(e.target.value)}),/*#__PURE__*/React.createElement(Button,{className:\"default search-icon\",color:\"primary\",outline:true,onClick:()=>handleSearch()},/*#__PURE__*/React.createElement(\"i\",{className:\"glyph-icon simple-icon-magnifier\"}))))),/*#__PURE__*/React.createElement(Colxx,{md:\"8\"},/*#__PURE__*/React.createElement(\"div\",{className:\"text-right mr-5 mb-2\"},/*#__PURE__*/React.createElement(\"span\",null,\"Page \"),/*#__PURE__*/React.createElement(UncontrolledDropdown,{className:\"d-inline-block\"},/*#__PURE__*/React.createElement(DropdownToggle,{caret:true,color:\"outline-primary\",size:\"xs\",\"data-display\":\"static\"},pageCount),/*#__PURE__*/React.createElement(DropdownMenu,{className:\"dropdownMenu\"},renderPageList())),/*#__PURE__*/React.createElement(\"span\",null,\" of \"),lastPageCount))),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Colxx,{xxs:\"12\",className:\"mb-4\"},/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardBody,null,/*#__PURE__*/React.createElement(CardSubtitle,{className:\"mb-3\"},/*#__PURE__*/React.createElement(Alert,{color:alertColor,isOpen:alertVisible,toggle:onDismissAlert},alertMsg)),/*#__PURE__*/React.createElement(Table,{responsive:true,striped:true,bordered:true},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"#\"),/*#__PURE__*/React.createElement(\"th\",null,\"Status\"),/*#__PURE__*/React.createElement(\"th\",null,\"Station\"),/*#__PURE__*/React.createElement(\"th\",null,\"Operator\"),/*#__PURE__*/React.createElement(\"th\",null,\"EV\"),/*#__PURE__*/React.createElement(\"th\",null,\"DB1\"),/*#__PURE__*/React.createElement(\"th\",null,\"CB1\"),/*#__PURE__*/React.createElement(\"th\",null,\"DB2\"),/*#__PURE__*/React.createElement(\"th\",null,\"CB2\"),/*#__PURE__*/React.createElement(\"th\",null,\"OTP\"))),/*#__PURE__*/React.createElement(\"tbody\",null,isLoading?/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",{className:\"text-center\",colSpan:\"10\"},/*#__PURE__*/React.createElement(\"div\",{className:\"custom-list-loading\"}))):transactionList.length>0?transactionList.map((item,index)=>/*#__PURE__*/React.createElement(\"tr\",{key:item.transaction_log_id},/*#__PURE__*/React.createElement(\"th\",{scope:\"row\"},pageCount==1?index+1:(pageCount-1)*10+index+1),/*#__PURE__*/React.createElement(\"td\",null,status_val[item.status]),/*#__PURE__*/React.createElement(\"td\",null,item.station_name),/*#__PURE__*/React.createElement(\"td\",null,item.operator),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"b\",null,\"Vehicle VIN : \"),item.vehicle_vin),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"p\",{className:\"mb-0\"},/*#__PURE__*/React.createElement(\"b\",null,\"BIN:\"),item.discharged_battery_bin_1),/*#__PURE__*/React.createElement(\"p\",{className:\"mb-0\"},/*#__PURE__*/React.createElement(\"b\",null,\"SOC:\"),item.discharged_battery_soc_1),/*#__PURE__*/React.createElement(\"p\",{className:\"mb-0\"},/*#__PURE__*/React.createElement(\"b\",null,\"BV:\"),item.discharged_battery_bv_1),/*#__PURE__*/React.createElement(\"p\",{className:\"mb-0\"},/*#__PURE__*/React.createElement(\"b\",null,\"REC:\"),item.discharged_battery_rec_1)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"p\",{className:\"mb-0\"},/*#__PURE__*/React.createElement(\"b\",null,\"BIN:\"),item.charged_battery_bin_1),/*#__PURE__*/React.createElement(\"p\",{className:\"mb-0\"},/*#__PURE__*/React.createElement(\"b\",null,\"SOC:\"),item.charged_battery_soc_1),/*#__PURE__*/React.createElement(\"p\",{className:\"mb-0\"},/*#__PURE__*/React.createElement(\"b\",null,\"BV:\"),item.charged_battery_bv_1),/*#__PURE__*/React.createElement(\"p\",{className:\"mb-0\"},/*#__PURE__*/React.createElement(\"b\",null,\"REC:\"),item.charged_battery_rec_1)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"p\",{className:\"mb-0\"},/*#__PURE__*/React.createElement(\"b\",null,\"BIN:\"),item.discharged_battery_bin_2),/*#__PURE__*/React.createElement(\"p\",{className:\"mb-0\"},/*#__PURE__*/React.createElement(\"b\",null,\"SOC:\"),item.discharged_battery_soc_2),/*#__PURE__*/React.createElement(\"p\",{className:\"mb-0\"},/*#__PURE__*/React.createElement(\"b\",null,\"BV:\"),item.discharged_battery_bv_2),/*#__PURE__*/React.createElement(\"p\",{className:\"mb-0\"},/*#__PURE__*/React.createElement(\"b\",null,\"REC:\"),item.discharged_battery_rec_2)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"p\",{className:\"mb-0\"},/*#__PURE__*/React.createElement(\"b\",null,\"BIN:\"),item.charged_battery_bin_2),/*#__PURE__*/React.createElement(\"p\",{className:\"mb-0\"},/*#__PURE__*/React.createElement(\"b\",null,\"SOC:\"),item.charged_battery_soc_2),/*#__PURE__*/React.createElement(\"p\",{className:\"mb-0\"},/*#__PURE__*/React.createElement(\"b\",null,\"BV:\"),item.charged_battery_bv_2),/*#__PURE__*/React.createElement(\"p\",{className:\"mb-0\"},/*#__PURE__*/React.createElement(\"b\",null,\"REC:\"),item.charged_battery_rec_2)),/*#__PURE__*/React.createElement(\"td\",null,item.end_otp))):/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",{className:\"text-center text-danger\",colSpan:\"10\"},\"Data  Not  Found\")))))))));};export default Transaction;","map":{"version":3,"sources":["D:/Shimyon/Emoiss/RiteshBhai/cdzb/chargezone/react-front-end/src/views/app/operations/Transaction.js"],"names":["React","useEffect","useState","CardSubtitle","CardBody","Row","Table","Card","DropdownItem","DropdownMenu","DropdownToggle","UncontrolledDropdown","Input","InputGroup","Button","Alert","Colxx","Separator","getCurrentUser","getTransactionAPI","axios","Transaction","transactionList","setTransactionList","isLoading","setIsLoading","searchBy","setSearchBy","pageCount","setPageCount","lastPageCount","setLastPageCount","status_val","alertVisible","setAlertVisible","alertMsg","setAlertMsg","alertColor","setAlertColor","getTransactionAPICall","currentUser","get","headers","Authorization","token","then","response","responseData","data","status","last_page","console","log","msg","catch","error","transactionAlert","onDismissAlert","renderPageList","pageNumbers","i","push","handleSearch","e","target","value","length","map","item","index","transaction_log_id","station_name","operator","vehicle_vin","discharged_battery_bin_1","discharged_battery_soc_1","discharged_battery_bv_1","discharged_battery_rec_1","charged_battery_bin_1","charged_battery_soc_1","charged_battery_bv_1","charged_battery_rec_1","discharged_battery_bin_2","discharged_battery_soc_2","discharged_battery_bv_2","discharged_battery_rec_2","charged_battery_bin_2","charged_battery_soc_2","charged_battery_bv_2","charged_battery_rec_2","end_otp"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { \n  CardSubtitle,CardBody, \n  Row, Table, Card,\n  DropdownItem,\n  DropdownMenu,\n  DropdownToggle,\n  UncontrolledDropdown,\n  Input,InputGroup,Button,\n  Alert\n } from 'reactstrap';\nimport { Colxx, Separator } from '../../../components/common/CustomBootstrap';\nimport {getCurrentUser} from '../../../helpers/Utils';\nimport {getTransactionAPI} from '../../../constants/defaultValues';\nimport axios from 'axios';\n\nconst Transaction = () => {\n  const [transactionList,setTransactionList] = useState([]);\n  const [isLoading,setIsLoading] = useState(true);\n  //search state\n  const [searchBy,setSearchBy] = useState(\"\");\n  //Pagination states\n  const [pageCount,setPageCount] = useState(\"1\");  \n  const [lastPageCount,setLastPageCount] = useState(\"1\");\n  const status_val = ['-','Scan EV','Scan DB1','Scan DB2','Scan OTP','Scan EV','Scan CB1','Scan CB2']\n  //alert states\n  const [alertVisible,setAlertVisible] = useState(false);\n  const [alertMsg,setAlertMsg] = useState(\"\");\n  const [alertColor,setAlertColor] = useState(\"\");\n\n  useEffect(()=>{\n    getTransactionAPICall();\n  },[pageCount])\n\n  //API CALLS\n  const getTransactionAPICall = async() => {\n    setIsLoading(true);\n    const currentUser = getCurrentUser();\n    await axios.get(getTransactionAPI+pageCount+`&search_param=`+searchBy,\n      {headers:{Authorization: `Bearer ${currentUser.token}`}})\n      .then(response=>{\n        const responseData = response.data;\n        if (responseData.status === 1) {\n          setLastPageCount(responseData.data.last_page)\n          setTransactionList(responseData.data.data);          \n        }else{\n          console.log(responseData.msg);\n        }\n        setIsLoading(false);\n      }).catch(error=>{\n        console.log(error);\n      })\n  }\n  //helper methods\n  //Alert helper methods\n  const transactionAlert = (status,msg)=>{\n    setAlertVisible(true);\n    setAlertMsg(msg);\n    if (status === 1) {\n      setAlertColor(\"success\");\n    } else {\n      setAlertColor(\"danger\");\n    }\n  }\n  const onDismissAlert = ()=>{\n    setAlertVisible(false);\n  }\n  //pagination method\n  const renderPageList = () => {\n    const pageNumbers = [];\n    for (let i = 0; i <lastPageCount; i += 1) {\n      pageNumbers.push(\n        <DropdownItem key={i} onClick={() => {setPageCount(i+1)}}>\n          {i+1}\n        </DropdownItem>\n      );\n    }\n    return pageNumbers;\n  };\n  //handle search input\n  const handleSearch = () => {\n      setPageCount(1);\n      getTransactionAPICall();\n  }\n\n  return (\n    <>\n      <Row>\n        <Colxx xxs=\"12\">\n        <span className=\"page_title\">Transactions</span>\n          <Separator className=\"mb-5\" />\n        </Colxx>\n      </Row>\n      <Row>\n        <Colxx md=\"4\">\n          <div className=\"ml-2 mb-2\">\n            <InputGroup>\n            <Input \n            type=\"text\" \n            placeholder=\"Search\"\n            value={searchBy}\n            onChange={e=>setSearchBy(e.target.value)}/>\n            <Button className=\"default search-icon\" color=\"primary\" outline onClick={()=>handleSearch()}><i className=\"glyph-icon simple-icon-magnifier\"></i></Button>\n            </InputGroup>  \n          </div>\n        </Colxx>\n        <Colxx md=\"8\">\n            <div className=\"text-right mr-5 mb-2\">\n              <span>Page </span>\n              <UncontrolledDropdown className=\"d-inline-block\">\n                <DropdownToggle caret color=\"outline-primary\" size=\"xs\" data-display=\"static\">\n                  {pageCount}\n                </DropdownToggle>\n                <DropdownMenu className=\"dropdownMenu\">\n                  {renderPageList()}\n                </DropdownMenu>\n              </UncontrolledDropdown>\n              <span> of </span>\n              {lastPageCount}\n            </div>\n        </Colxx>\n      </Row>\n      <Row>\n        <Colxx xxs=\"12\" className=\"mb-4\">\n          <Card>\n            <CardBody>\n              <CardSubtitle className=\"mb-3\">\n                  <Alert color={alertColor} isOpen={alertVisible} toggle={onDismissAlert}>\n                    {alertMsg}\n                  </Alert>\n              </CardSubtitle>\n              <Table responsive striped bordered>\n                  <thead>\n                    <tr>\n                      <th>#</th>\n                      <th>Status</th>\n                      <th>Station</th>\n                      <th>Operator</th>\n                      <th>EV</th>\n                      <th>DB1</th>\n                      <th>CB1</th>\n                      <th>DB2</th>\n                      <th>CB2</th>\n                      <th>OTP</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {isLoading ?\n                      <tr>\n                          <td className=\"text-center\" colSpan=\"10\"><div className=\"custom-list-loading\" /></td>\n                      </tr> : \n                         transactionList.length > 0 ?\n                            transactionList.map((item,index)=>\n                              <tr key={item.transaction_log_id}>\n                                <th scope=\"row\">{pageCount==1?index+1:(pageCount-1)*10+index +1}</th>\n                                <td>{status_val[item.status]}</td>\n                                <td>{item.station_name}</td>\n                                <td>{item.operator}</td>\n                                <td><b>Vehicle VIN : </b>{item.vehicle_vin}</td>\n                                <td>\n                                    <p className=\"mb-0\"><b>BIN:</b>{item.discharged_battery_bin_1}</p>\n                                    <p className=\"mb-0\"><b>SOC:</b>{item.discharged_battery_soc_1}</p>\n                                    <p className=\"mb-0\"><b>BV:</b>{item.discharged_battery_bv_1}</p>\n                                    <p className=\"mb-0\"><b>REC:</b>{item.discharged_battery_rec_1}</p>                           \n                                </td>\n                                <td>\n                                    <p className=\"mb-0\"><b>BIN:</b>{item.charged_battery_bin_1}</p>\n                                    <p className=\"mb-0\"><b>SOC:</b>{item.charged_battery_soc_1}</p>\n                                    <p className=\"mb-0\"><b>BV:</b>{item.charged_battery_bv_1}</p>\n                                    <p className=\"mb-0\"><b>REC:</b>{item.charged_battery_rec_1}</p>\n                                </td> \n                                <td>\n                                    <p className=\"mb-0\"><b>BIN:</b>{item.discharged_battery_bin_2}</p>\n                                    <p className=\"mb-0\"><b>SOC:</b>{item.discharged_battery_soc_2}</p>\n                                    <p className=\"mb-0\"><b>BV:</b>{item.discharged_battery_bv_2}</p>\n                                    <p className=\"mb-0\"><b>REC:</b>{item.discharged_battery_rec_2}</p> \n                                </td>\n                                <td>\n                                    <p className=\"mb-0\"><b>BIN:</b>{item.charged_battery_bin_2}</p>\n                                    <p className=\"mb-0\"><b>SOC:</b>{item.charged_battery_soc_2}</p>\n                                    <p className=\"mb-0\"><b>BV:</b>{item.charged_battery_bv_2}</p>\n                                    <p className=\"mb-0\"><b>REC:</b>{item.charged_battery_rec_2}</p>\n                                </td>\n                                <td>{item.end_otp}</td>\n                              </tr>\n                            ):<tr>\n                                  <td className=\"text-center text-danger\" colSpan=\"10\">Data  Not  Found</td>\n                              </tr>\n                    }                                       \n                  </tbody>\n                </Table>\n            </CardBody>\n          </Card>\n        </Colxx>\n      </Row>\n    </>\n  );\n};\n\nexport default Transaction;\n"]},"metadata":{},"sourceType":"module"}