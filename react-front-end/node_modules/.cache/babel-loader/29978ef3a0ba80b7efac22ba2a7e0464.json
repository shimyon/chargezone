{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\Shimyon\\\\Emoiss\\\\RiteshBhai\\\\cdzb\\\\chargezone-frontend-development\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"D:\\\\Shimyon\\\\Emoiss\\\\RiteshBhai\\\\cdzb\\\\chargezone-frontend-development\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:\\\\Shimyon\\\\Emoiss\\\\RiteshBhai\\\\cdzb\\\\chargezone-frontend-development\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{Card,CardBody,CardHeader,CardTitle,FormGroup,Alert,Row,Button,Input,Table,Modal,ModalHeader}from'reactstrap';import{Colxx,Separator}from'../../../components/common/CustomBootstrap';import{getCurrentUser}from'../../../helpers/Utils';import{getFleetOperatorMappingListAPI,getUserMappingListByRoleAPI,mapFleetOperatorAPI,mapByRoleAPI}from'../../../constants/defaultValues';import axios from'axios';import{useLocation}from'react-router-dom';import{Formik}from'formik';import*as yup from'yup';const StationDetail=()=>{//alert states\nconst _useState=useState(false),_useState2=_slicedToArray(_useState,2),alertVisible=_useState2[0],setAlertVisible=_useState2[1];const _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),alertMsg=_useState4[0],setAlertMsg=_useState4[1];const _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),alertColor=_useState6[0],setAlertColor=_useState6[1];const _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),unmapAlertVisible=_useState8[0],setUnmapAlertVisible=_useState8[1];//Modal States\nconst _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),modalVisible=_useState10[0],setModalVisible=_useState10[1];//flag to dislpay list\nconst _useState11=useState(0),_useState12=_slicedToArray(_useState11,2),listFlag=_useState12[0],setListFlag=_useState12[1];//button selected\nconst _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),fleetOutline=_useState14[0],setFleetOutline=_useState14[1];//if outline false then button selected\nconst _useState15=useState(true),_useState16=_slicedToArray(_useState15,2),operatorOutline=_useState16[0],setOperatorOutline=_useState16[1];const _useState17=useState(true),_useState18=_slicedToArray(_useState17,2),managerOutline=_useState18[0],setManagerOutline=_useState18[1];//user role\nconst _useState19=useState(\"Fleet Operator\"),_useState20=_slicedToArray(_useState19,2),userRole=_useState20[0],setUserRole=_useState20[1];//fleet/operator/manager id to map\nconst _useState21=useState(\"0\"),_useState22=_slicedToArray(_useState21,2),mappingId=_useState22[0],setMappingId=_useState22[1];//fleet/operator/manager id to Unmap\nconst _useState23=useState(\"\"),_useState24=_slicedToArray(_useState23,2),unmapId=_useState24[0],setUnmapId=_useState24[1];//map-unmap list\nconst _useState25=useState([]),_useState26=_slicedToArray(_useState25,2),mappedList=_useState26[0],setMappedList=_useState26[1];const _useState27=useState([]),_useState28=_slicedToArray(_useState27,2),unmappedList=_useState28[0],setUnmappedList=_useState28[1];//set id for unmap\nconst _useState29=useState(false),_useState30=_slicedToArray(_useState29,2),isUpdate=_useState30[0],setIsUpdate=_useState30[1];const location=useLocation();useEffect(()=>{getMappingListByRoleAPICall();},[isUpdate,userRole]);//API calls\nconst getMappingListByRoleAPICall=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:setMappedList([]);setUnmappedList([]);_context.t0=userRole;_context.next=_context.t0===\"Fleet Operator\"?5:_context.t0===\"Operator\"?7:_context.t0===\"Manager\"?9:11;break;case 5:getFleetOperatorMappingListAPICall();return _context.abrupt(\"break\",13);case 7:getOperatorMappingListAPICall();return _context.abrupt(\"break\",13);case 9:getManagerMappingListAPICall();return _context.abrupt(\"break\",13);case 11:getFleetOperatorMappingListAPICall();return _context.abrupt(\"break\",13);case 13:case\"end\":return _context.stop();}},_callee);}));return function getMappingListByRoleAPICall(){return _ref.apply(this,arguments);};}();const getFleetOperatorMappingListAPICall=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var currentUser;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:currentUser=getCurrentUser();_context2.next=3;return axios.post(getFleetOperatorMappingListAPI,{hub_id:location.state.hub_id},{headers:{Authorization:\"Bearer \".concat(currentUser.token)}}).then(response=>{const responseData=response.data;if(responseData.status===1){setMappedList(responseData.data.mapped_fleet_operator);setUnmappedList(responseData.data.other_fleet_operator);if(responseData.data.mapped_fleet_operator.length>0){setListFlag(responseData.status);}else{setListFlag(0);}}else{setListFlag(responseData.status);}}).catch(error=>{console.log(error);});case 3:case\"end\":return _context2.stop();}},_callee2);}));return function getFleetOperatorMappingListAPICall(){return _ref2.apply(this,arguments);};}();const getOperatorMappingListAPICall=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var currentUser;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:setMappedList([]);currentUser=getCurrentUser();_context3.next=4;return axios.post(getUserMappingListByRoleAPI,{user_role:\"Operator\",hub_id:location.state.hub_id},{headers:{Authorization:\"Bearer \".concat(currentUser.token)}}).then(response=>{const responseData=response.data;if(responseData.status===1){setMappedList(responseData.data.mapped_user);setUnmappedList(responseData.data.other_user);if(responseData.data.mapped_user.length>0){setListFlag(responseData.status);}else{setListFlag(0);}}else{setListFlag(responseData.status);}}).catch(error=>{console.log(error);});case 4:case\"end\":return _context3.stop();}},_callee3);}));return function getOperatorMappingListAPICall(){return _ref3.apply(this,arguments);};}();const getManagerMappingListAPICall=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var currentUser;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:currentUser=getCurrentUser();_context4.next=3;return axios.post(getUserMappingListByRoleAPI,{user_role:\"Manager\",hub_id:location.state.hub_id},{headers:{Authorization:\"Bearer \".concat(currentUser.token)}}).then(response=>{const responseData=response.data;if(responseData.status===1){setMappedList(responseData.data.mapped_user);setUnmappedList(responseData.data.other_user);if(responseData.data.mapped_user.length>0){setListFlag(responseData.status);}else{setListFlag(0);}}else{setListFlag(responseData.status);}}).catch(error=>{console.log(error);});case 3:case\"end\":return _context4.stop();}},_callee4);}));return function getManagerMappingListAPICall(){return _ref4.apply(this,arguments);};}();const MapByRoleAPICall=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(stationId,idToMap,mapstate){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:_context5.t0=userRole;_context5.next=_context5.t0===\"Fleet Operator\"?3:_context5.t0===\"Operator\"?5:_context5.t0===\"Manager\"?7:9;break;case 3:MapStationWithFleetAPICall(stationId,idToMap,mapstate);return _context5.abrupt(\"break\",9);case 5:MapStationWithOperatorAPICall(stationId,idToMap,mapstate);return _context5.abrupt(\"break\",9);case 7:MapStationWithManagerAPICall(stationId,idToMap,mapstate);return _context5.abrupt(\"break\",9);case 9:case\"end\":return _context5.stop();}},_callee5);}));return function MapByRoleAPICall(_x,_x2,_x3){return _ref5.apply(this,arguments);};}();const MapStationWithFleetAPICall=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(stationId,fleetId,mapstate){var currentUser;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1)switch(_context6.prev=_context6.next){case 0:setModalVisible(false);currentUser=getCurrentUser();_context6.next=4;return axios.post(mapFleetOperatorAPI,{hub_id:stationId,fleet_operator_id:fleetId},{headers:{Authorization:\"Bearer \".concat(currentUser.token)}}).then(response=>{const responseData=response.data;if(responseData.status===1){setIsUpdate(!isUpdate);if(mapstate==1){mapAlert(responseData.status,responseData.msg);}else{unMapAlert(responseData.status,\"Station Unmapped Successfully\");}}else{mapAlert(responseData.status,responseData.msg);}}).catch(error=>{console.log(error);});case 4:case\"end\":return _context6.stop();}},_callee6);}));return function MapStationWithFleetAPICall(_x4,_x5,_x6){return _ref6.apply(this,arguments);};}();const MapStationWithOperatorAPICall=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(stationId,userId,mapstate){var currentUser;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1)switch(_context7.prev=_context7.next){case 0:setModalVisible(false);currentUser=getCurrentUser();_context7.next=4;return axios.post(mapByRoleAPI,{hub_id:stationId,user_id:userId,user_role:\"Operator\"},{headers:{Authorization:\"Bearer \".concat(currentUser.token)}}).then(response=>{const responseData=response.data;if(responseData.status===1){setIsUpdate(!isUpdate);if(mapstate==1){mapAlert(responseData.status,responseData.msg);}else{unMapAlert(responseData.status,\"Unmapped Successfully\");}}else{mapAlert(responseData.status,responseData.msg);}}).catch(error=>{console.log(error);});case 4:case\"end\":return _context7.stop();}},_callee7);}));return function MapStationWithOperatorAPICall(_x7,_x8,_x9){return _ref7.apply(this,arguments);};}();const MapStationWithManagerAPICall=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(stationId,userId,mapstate){var currentUser;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1)switch(_context8.prev=_context8.next){case 0:setModalVisible(false);currentUser=getCurrentUser();_context8.next=4;return axios.post(mapByRoleAPI,{hub_id:stationId,user_id:userId,user_role:\"Manager\"},{headers:{Authorization:\"Bearer \".concat(currentUser.token)}}).then(response=>{const responseData=response.data;if(responseData.status===1){setIsUpdate(!isUpdate);if(mapstate==1){mapAlert(responseData.status,responseData.msg);}else{unMapAlert(responseData.status,\" Unmapped Successfully\");}}else{mapAlert(responseData.status,responseData.msg);}}).catch(error=>{console.log(error);});case 4:case\"end\":return _context8.stop();}},_callee8);}));return function MapStationWithManagerAPICall(_x10,_x11,_x12){return _ref8.apply(this,arguments);};}();//helper methods\n//Alert helper methods\nconst mapAlert=(status,msg)=>{setAlertVisible(true);setAlertMsg(msg);if(status===1){setAlertColor(\"success\");}else{setAlertColor(\"danger\");}};const unMapAlert=(status,msg)=>{setUnmapAlertVisible(true);setAlertMsg(msg);if(status===1){setAlertColor(\"success\");}else{setAlertColor(\"danger\");}};const onDismissAlert=()=>{setAlertVisible(false);};//Modal helper methods\nconst toggleModal=unMapID=>{setUnmapId(unMapID);setModalVisible(!modalVisible);};//display details method\nconst sortDetail=(hubName,name)=>{if(hubName==null||hubName==\"\"){return name;}else{return name+\" - \"+hubName;}};//map method\nconst handleMap=id=>{if(id==0){mapAlert(0,\"Please select \"+userRole);return;}else{MapByRoleAPICall(location.state.hub_id,id,1);}};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Colxx,{xxs:\"12\"},/*#__PURE__*/React.createElement(\"span\",{className:\"page_title\"},\"Station Mapping\"),/*#__PURE__*/React.createElement(\"a\",{href:\"station\",className:\"mt-2 btn-primary default btn-sm float-right\"},/*#__PURE__*/React.createElement(\"b\",null,/*#__PURE__*/React.createElement(\"i\",{className:\"glyph-icon iconsminds-arrow-back-3\"}),\" Go Back\")),/*#__PURE__*/React.createElement(Separator,{className:\"mb-5 mt-1\"}))),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Colxx,{xxs:12,className:\"mb-2\"},/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardBody,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Colxx,{md:\"6\"},/*#__PURE__*/React.createElement(Button,{outline:fleetOutline,color:\"primary\",className:\"default\",onClick:()=>{setFleetOutline(false);setOperatorOutline(true);setManagerOutline(true);setUserRole(\"Fleet Operator\");}},/*#__PURE__*/React.createElement(\"b\",null,\"Fleet Operator\")),/*#__PURE__*/React.createElement(Button,{outline:operatorOutline,color:\"primary\",className:\"default\",onClick:()=>{setFleetOutline(true);setOperatorOutline(false);setManagerOutline(true);setUserRole(\"Operator\");}},/*#__PURE__*/React.createElement(\"b\",null,\"Operator\")),/*#__PURE__*/React.createElement(Button,{outline:managerOutline,color:\"primary\",className:\"default\",onClick:()=>{setFleetOutline(true);setOperatorOutline(true);setManagerOutline(false);setUserRole(\"Manager\");}},/*#__PURE__*/React.createElement(\"b\",null,\"Manager\")))),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Colxx,{md:\"6 mt-5 \"},/*#__PURE__*/React.createElement(Alert,{color:alertColor,isOpen:alertVisible,toggle:onDismissAlert},alertMsg)),/*#__PURE__*/React.createElement(Colxx,{md:\"12\"},/*#__PURE__*/React.createElement(\"h4\",{className:\"mb-3\"},\"Select \",userRole))),/*#__PURE__*/React.createElement(Row,{className:\"mb-4\"},/*#__PURE__*/React.createElement(Colxx,{md:6},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Input,{type:\"select\",name:\"id\",onChange:e=>setMappingId(e.target.value)},/*#__PURE__*/React.createElement(\"option\",{key:0,value:0},\"Select\"),userRole==\"Operator\"||userRole===\"Manager\"?unmappedList.map((item,i)=>/*#__PURE__*/React.createElement(\"option\",{key:i,value:item.id},sortDetail(item.station_name,item.name))):unmappedList.map((item,i)=>/*#__PURE__*/React.createElement(\"option\",{key:i,value:item.fleet_operator_id},sortDetail(item.hub_name,item.name)))))),/*#__PURE__*/React.createElement(Colxx,{md:\"6\"},/*#__PURE__*/React.createElement(Button,{color:\"primary\",className:\"default\",onClick:()=>handleMap(mappingId)},/*#__PURE__*/React.createElement(\"b\",null,\"Save\")))))))),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Colxx,{xxs:12},/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardBody,null,/*#__PURE__*/React.createElement(CardHeader,{className:\"mb-3\"},/*#__PURE__*/React.createElement(Alert,{color:alertColor,isOpen:unmapAlertVisible,toggle:()=>setUnmapAlertVisible(false)},alertMsg)),/*#__PURE__*/React.createElement(\"h4\",null,\"Mapping Details\"),//check role\nuserRole==\"Operator\"||userRole==\"Manager\"?/*#__PURE__*/React.createElement(Table,{responsive:true,bordered:true,striped:true},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"#\"),/*#__PURE__*/React.createElement(\"th\",null,\"Name\"),/*#__PURE__*/React.createElement(\"th\",null,\"Email\"),/*#__PURE__*/React.createElement(\"th\",null,\"Contact Number\"),/*#__PURE__*/React.createElement(\"th\",null,\"Action\"))),/*#__PURE__*/React.createElement(\"tbody\",null,listFlag>0?mappedList.map((item,index)=>/*#__PURE__*/React.createElement(\"tr\",{key:index},/*#__PURE__*/React.createElement(\"th\",{scope:\"row\"},index+1),/*#__PURE__*/React.createElement(\"td\",null,item.name),/*#__PURE__*/React.createElement(\"td\",null,item.email),/*#__PURE__*/React.createElement(\"td\",null,item.contact_number),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(Button,{color:\"danger\",className:\"default btn-sm tbl_action_btn\",onClick:()=>{toggleModal(item.id);}},/*#__PURE__*/React.createElement(\"i\",{className:\"glyph-icon simple-icon-trash\"}))))):/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",{className:\"text-center text-danger\",colSpan:\"5\"},\"Data  Not  Found\")))):/*#__PURE__*/React.createElement(Table,{responsive:true,bordered:true,striped:true},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"#\"),/*#__PURE__*/React.createElement(\"th\",null,\"Name\"),/*#__PURE__*/React.createElement(\"th\",null,\"Fleet Id\"),/*#__PURE__*/React.createElement(\"th\",null,\"Address\"),/*#__PURE__*/React.createElement(\"th\",null,\"Contact Person\"),/*#__PURE__*/React.createElement(\"th\",null,\"Contact Email\"),/*#__PURE__*/React.createElement(\"th\",null,\"Contact Number\"),/*#__PURE__*/React.createElement(\"th\",null,\"Remark 2\"),/*#__PURE__*/React.createElement(\"th\",null,\"Remark 2\"),/*#__PURE__*/React.createElement(\"th\",null,\"Action\"))),/*#__PURE__*/React.createElement(\"tbody\",null,listFlag>0?mappedList.map((item,index)=>/*#__PURE__*/React.createElement(\"tr\",{key:index},/*#__PURE__*/React.createElement(\"th\",{scope:\"row\"},index+1),/*#__PURE__*/React.createElement(\"td\",null,item.name),/*#__PURE__*/React.createElement(\"td\",null,item.fleet_id),/*#__PURE__*/React.createElement(\"td\",null,item.address),/*#__PURE__*/React.createElement(\"td\",null,item.contact_person),/*#__PURE__*/React.createElement(\"td\",null,item.contact_email),/*#__PURE__*/React.createElement(\"td\",null,item.contact_number),/*#__PURE__*/React.createElement(\"td\",null,item.remark_1),/*#__PURE__*/React.createElement(\"td\",null,item.remark_2),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(Button,{color:\"danger\",className:\"default btn-sm tbl_action_btn\",onClick:()=>{toggleModal(item.fleet_operator_id);}},/*#__PURE__*/React.createElement(\"i\",{className:\"glyph-icon simple-icon-trash\"}))))):/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",{className:\"text-center text-danger\",colSpan:\"10\"},\"Data  Not  Found\")))),/*#__PURE__*/React.createElement(Modal,{isOpen:modalVisible,toggle:toggleModal},/*#__PURE__*/React.createElement(ModalHeader,{className:\"text-center\"},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Colxx,{md:\"12\"},\"Are you sure you would like to unmap this ?\"),/*#__PURE__*/React.createElement(Colxx,{md:\"12\"},/*#__PURE__*/React.createElement(Button,{color:\"success\",className:\"mt-4\",onClick:()=>MapByRoleAPICall(0,unmapId,0)},\"Unmap\"),' ',/*#__PURE__*/React.createElement(Button,{color:\"danger\",className:\"mt-4 mr-2\",onClick:toggleModal},\"Cancel\"))))))))));};export default StationDetail;","map":{"version":3,"sources":["D:/Shimyon/Emoiss/RiteshBhai/cdzb/chargezone-frontend-development/src/views/app/mapping/StationDetail.js"],"names":["React","useEffect","useState","Card","CardBody","CardHeader","CardTitle","FormGroup","Alert","Row","Button","Input","Table","Modal","ModalHeader","Colxx","Separator","getCurrentUser","getFleetOperatorMappingListAPI","getUserMappingListByRoleAPI","mapFleetOperatorAPI","mapByRoleAPI","axios","useLocation","Formik","yup","StationDetail","alertVisible","setAlertVisible","alertMsg","setAlertMsg","alertColor","setAlertColor","unmapAlertVisible","setUnmapAlertVisible","modalVisible","setModalVisible","listFlag","setListFlag","fleetOutline","setFleetOutline","operatorOutline","setOperatorOutline","managerOutline","setManagerOutline","userRole","setUserRole","mappingId","setMappingId","unmapId","setUnmapId","mappedList","setMappedList","unmappedList","setUnmappedList","isUpdate","setIsUpdate","location","getMappingListByRoleAPICall","getFleetOperatorMappingListAPICall","getOperatorMappingListAPICall","getManagerMappingListAPICall","currentUser","post","hub_id","state","headers","Authorization","token","then","response","responseData","data","status","mapped_fleet_operator","other_fleet_operator","length","catch","error","console","log","user_role","mapped_user","other_user","MapByRoleAPICall","stationId","idToMap","mapstate","MapStationWithFleetAPICall","MapStationWithOperatorAPICall","MapStationWithManagerAPICall","fleetId","fleet_operator_id","mapAlert","msg","unMapAlert","userId","user_id","onDismissAlert","toggleModal","unMapID","sortDetail","hubName","name","handleMap","id","e","target","value","map","item","i","station_name","hub_name","index","email","contact_number","fleet_id","address","contact_person","contact_email","remark_1","remark_2"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { \n  Card, CardBody, \n  CardHeader, CardTitle,\n  FormGroup,\n  Alert,\n  Row, Button, Input,Table,\n  Modal,ModalHeader\n} from 'reactstrap';\nimport { Colxx, Separator } from '../../../components/common/CustomBootstrap';\nimport { getCurrentUser } from '../../../helpers/Utils'\nimport {getFleetOperatorMappingListAPI,getUserMappingListByRoleAPI,mapFleetOperatorAPI,mapByRoleAPI} from '../../../constants/defaultValues'\nimport axios from 'axios';\nimport {useLocation} from 'react-router-dom';\nimport {Formik} from 'formik';\nimport * as yup from 'yup';\n\nconst StationDetail = () => {\n  //alert states\n  const [alertVisible,setAlertVisible] = useState(false);\n  const [alertMsg,setAlertMsg] = useState(\"\");\n  const [alertColor,setAlertColor] = useState(\"\");\n  const [unmapAlertVisible,setUnmapAlertVisible] = useState(false);\n  //Modal States\n  const [modalVisible,setModalVisible] = useState(false);\n  //flag to dislpay list\n  const [listFlag,setListFlag] = useState(0);\n  //button selected\n  const [fleetOutline,setFleetOutline] = useState(false); //if outline false then button selected\n  const [operatorOutline,setOperatorOutline] = useState(true);\n  const [managerOutline,setManagerOutline] = useState(true);\n  //user role\n  const [userRole,setUserRole] = useState(\"Fleet Operator\");\n  //fleet/operator/manager id to map\n  const [mappingId,setMappingId] = useState(\"0\");\n  //fleet/operator/manager id to Unmap\n  const [unmapId,setUnmapId] = useState(\"\");\n   //map-unmap list\n   const [mappedList,setMappedList] = useState([]);\n   const [unmappedList,setUnmappedList] = useState([]);\n   //set id for unmap\n   const [isUpdate,setIsUpdate] = useState(false);\n\n   const location = useLocation();\n\n   useEffect(()=>{\n    getMappingListByRoleAPICall();\n  },[isUpdate,userRole])\n\n  //API calls\n  const getMappingListByRoleAPICall = async() => {\n    setMappedList([]);\n    setUnmappedList([]);\n    switch (userRole) {\n      case \"Fleet Operator\":\n        getFleetOperatorMappingListAPICall();\n        break;\n      case \"Operator\":\n        getOperatorMappingListAPICall();\n        break;\n      case \"Manager\":\n      getManagerMappingListAPICall();\n      break;\n      default:\n        getFleetOperatorMappingListAPICall();\n        break;\n    }\n  }\n  const getFleetOperatorMappingListAPICall = async() => {\n    const currentUser = getCurrentUser();\n    await axios.post(getFleetOperatorMappingListAPI,\n      {hub_id:location.state.hub_id},\n      {headers:{Authorization: `Bearer ${currentUser.token}`}})\n      .then(response=>{\n        const responseData = response.data;\n        if (responseData.status === 1) {\n          setMappedList(responseData.data.mapped_fleet_operator);\n          setUnmappedList(responseData.data.other_fleet_operator);\n          if (responseData.data.mapped_fleet_operator.length>0) {\n            setListFlag(responseData.status);\n          }else{\n            setListFlag(0);\n          }\n        }else{\n          setListFlag(responseData.status);\n        }\n      }).catch(error=>{\n        console.log(error);\n      })\n  }\n  const getOperatorMappingListAPICall = async() => {\n    setMappedList([]);\n    const currentUser = getCurrentUser();\n    await axios.post(getUserMappingListByRoleAPI,\n      {user_role:\"Operator\",hub_id:location.state.hub_id},\n      {headers:{Authorization: `Bearer ${currentUser.token}`}})\n      .then(response=>{\n        const responseData = response.data;\n        if (responseData.status === 1) {\n          setMappedList(responseData.data.mapped_user);\n          setUnmappedList(responseData.data.other_user);\n          if (responseData.data.mapped_user.length>0) {\n            setListFlag(responseData.status);\n          }else{\n            setListFlag(0);\n          }\n        }else{\n          setListFlag(responseData.status);\n        }\n      }).catch(error=>{\n        console.log(error);\n      })\n  }\n  const getManagerMappingListAPICall = async() => {\n    const currentUser = getCurrentUser();\n    await axios.post(getUserMappingListByRoleAPI,\n      {user_role:\"Manager\",hub_id:location.state.hub_id},\n      {headers:{Authorization: `Bearer ${currentUser.token}`}})\n      .then(response=>{\n        const responseData = response.data;\n        if (responseData.status === 1) {\n          setMappedList(responseData.data.mapped_user);\n          setUnmappedList(responseData.data.other_user);\n          if (responseData.data.mapped_user.length>0) {\n            setListFlag(responseData.status);\n          }else{\n            setListFlag(0);\n          }\n        }else{\n          setListFlag(responseData.status);\n        }\n      }).catch(error=>{\n        console.log(error);\n      })\n  }\n  const MapByRoleAPICall = async(stationId,idToMap,mapstate) => {\n    switch (userRole) {\n      case \"Fleet Operator\":\n        MapStationWithFleetAPICall(stationId,idToMap,mapstate);\n        break;\n      case \"Operator\":\n        MapStationWithOperatorAPICall(stationId,idToMap,mapstate);\n        break;\n      case \"Manager\":\n      MapStationWithManagerAPICall(stationId,idToMap,mapstate);\n      break;\n    }\n  }\n  const MapStationWithFleetAPICall = async(stationId,fleetId,mapstate) =>{\n    setModalVisible(false);\n    const currentUser = getCurrentUser();\n    await axios.post(mapFleetOperatorAPI,\n      {hub_id:stationId,fleet_operator_id:fleetId},\n      {headers:{Authorization: `Bearer ${currentUser.token}`}})\n      .then(response=>{\n        const responseData = response.data;\n        if (responseData.status === 1) {\n          setIsUpdate(!isUpdate);\n          if (mapstate==1) {\n            mapAlert(responseData.status,responseData.msg);\n          }else{\n            unMapAlert(responseData.status,\"Station Unmapped Successfully\");\n          }\n        }else{\n          mapAlert(responseData.status,responseData.msg);\n        }\n      }).catch(error=>{\n        console.log(error);\n      })\n  }\n  const MapStationWithOperatorAPICall = async(stationId,userId,mapstate) =>{\n    setModalVisible(false);\n    const currentUser = getCurrentUser();\n    await axios.post(mapByRoleAPI,\n      {hub_id:stationId,user_id:userId,user_role:\"Operator\"},\n      {headers:{Authorization: `Bearer ${currentUser.token}`}})\n      .then(response=>{\n        const responseData = response.data;\n        if (responseData.status === 1) {\n          setIsUpdate(!isUpdate);\n          if (mapstate==1) {\n            mapAlert(responseData.status,responseData.msg);\n          }else{\n            unMapAlert(responseData.status,\"Unmapped Successfully\");\n          }\n        }else{\n          mapAlert(responseData.status,responseData.msg);\n        }\n      }).catch(error=>{\n        console.log(error);\n      })\n  }\n  const MapStationWithManagerAPICall = async(stationId,userId,mapstate) =>{\n    setModalVisible(false);\n    const currentUser = getCurrentUser();\n    await axios.post(mapByRoleAPI,\n      {hub_id:stationId,user_id:userId,user_role:\"Manager\"},\n      {headers:{Authorization: `Bearer ${currentUser.token}`}})\n      .then(response=>{\n        const responseData = response.data;\n        if (responseData.status === 1) {\n          setIsUpdate(!isUpdate);\n          if (mapstate==1) {\n            mapAlert(responseData.status,responseData.msg);\n          }else{\n            unMapAlert(responseData.status,\" Unmapped Successfully\");\n          }\n        }else{\n          mapAlert(responseData.status,responseData.msg);\n        }\n      }).catch(error=>{\n        console.log(error);\n      })\n  }\n\n  //helper methods\n  //Alert helper methods\n  const mapAlert = (status,msg)=>{\n    setAlertVisible(true);\n    setAlertMsg(msg);\n    if (status === 1) {\n      setAlertColor(\"success\");\n    } else {\n      setAlertColor(\"danger\");\n    }\n  }\n  const unMapAlert = (status,msg)=>{\n    setUnmapAlertVisible(true);\n    setAlertMsg(msg);\n    if (status === 1) {\n      setAlertColor(\"success\");\n    } else {\n      setAlertColor(\"danger\");\n    }\n  }\n  const onDismissAlert = ()=>{\n    setAlertVisible(false);\n  }\n  //Modal helper methods\n  const toggleModal = (unMapID) => {\n    setUnmapId(unMapID);\n    setModalVisible(!modalVisible);\n  }\n  //display details method\n  const sortDetail = (hubName,name) => {\n    if (hubName == null || hubName == \"\") {\n      return name;\n    } else {\n      return name+\" - \"+hubName;\n    }\n  }\n  //map method\n  const handleMap = (id) => {\n    if (id == 0) {\n      mapAlert(0,\"Please select \"+userRole)\n      return;\n    } else {\n      MapByRoleAPICall(location.state.hub_id,id,1);\n    }\n  }\n\n  return (\n    <>\n      <Row>\n        <Colxx xxs=\"12\">\n            <span className=\"page_title\">Station Mapping</span>\n            <a href=\"station\" className=\"mt-2 btn-primary default btn-sm float-right\">\n                <b><i className=\"glyph-icon iconsminds-arrow-back-3\"></i> Go Back</b>\n            </a>\n          <Separator className=\"mb-5 mt-1\" />\n        </Colxx>\n      </Row>\n      <Row>\n        <Colxx xxs={12} className=\"mb-2\">\n          <Card>\n            <CardBody>\n              <Row>\n                <Colxx md=\"6\">\n                  <Button \n                    outline={fleetOutline} \n                    color=\"primary\" \n                    className=\"default\" \n                    onClick={()=>{\n                      setFleetOutline(false);\n                      setOperatorOutline(true);\n                      setManagerOutline(true);\n                      setUserRole(\"Fleet Operator\")\n                      }}>\n                      <b>Fleet Operator</b>\n                  </Button>\n                  <Button \n                    outline={operatorOutline} \n                    color=\"primary\" \n                    className=\"default\" \n                    onClick={()=>{\n                      setFleetOutline(true);\n                      setOperatorOutline(false);\n                      setManagerOutline(true);\n                      setUserRole(\"Operator\")}}>\n                    <b>Operator</b>\n                  </Button>\n                  <Button \n                    outline={managerOutline} \n                    color=\"primary\" \n                    className=\"default\" \n                    onClick={()=>{\n                      setFleetOutline(true);\n                      setOperatorOutline(true);\n                      setManagerOutline(false);\n                      setUserRole(\"Manager\")}}>\n                    <b>Manager</b>\n                  </Button>\n                </Colxx>\n              </Row>\n              <Row>\n                <Colxx md=\"6 mt-5 \">\n                    <Alert color={alertColor} isOpen={alertVisible} toggle={onDismissAlert}>\n                      {alertMsg}\n                    </Alert>\n                  </Colxx>                  \n                  <Colxx md=\"12\">\n                    <h4 className=\"mb-3\">Select {userRole}</h4>\n                  </Colxx>   \n              </Row>\n              <Row className=\"mb-4\">\n                <Colxx md={6}>\n                  <FormGroup>\n                  <Input \n                    type=\"select\" \n                    name=\"id\"\n                    onChange={(e)=>setMappingId(e.target.value)}\n                  >\n                    <option key={0} value={0}>Select</option>\n                    {\n                      userRole==\"Operator\"|| userRole===\"Manager\"?\n                      unmappedList.map((item,i)=>\n                        <option key={i} value={item.id}>{sortDetail(item.station_name,item.name)}</option>\n                      ):\n                      unmappedList.map((item,i)=>\n                        <option key={i} value={item.fleet_operator_id}>{sortDetail(item.hub_name,item.name)}</option>\n                      )\n                    }\n                  </Input>\n                  </FormGroup>\n                </Colxx>\n                <Colxx md=\"6\">\n                  <Button \n                  color=\"primary\" \n                  className=\"default\"\n                  onClick={()=>handleMap(mappingId)}>\n                      <b>Save</b>\n                  </Button>\n                </Colxx>\n              </Row> \n            </CardBody>\n          </Card>\n        </Colxx>\n      </Row>\n      <Row>\n        <Colxx xxs={12}>\n          <Card>\n            <CardBody>\n              <CardHeader className=\"mb-3\">\n                <Alert color={alertColor} isOpen={unmapAlertVisible} toggle={()=>setUnmapAlertVisible(false)}>\n                  {alertMsg}\n                </Alert>\n              </CardHeader>\n              <h4>Mapping Details</h4>\n                  {\n                    //check role\n                    userRole==\"Operator\"|| userRole==\"Manager\"?\n                      <Table responsive bordered striped>\n                        <thead>\n                          <tr>\n                            <th>#</th>\n                            <th>Name</th>\n                            <th>Email</th>\n                            <th>Contact Number</th>\n                            <th>Action</th>\n                          </tr>\n                        </thead>\n                        <tbody>\n                          {listFlag>0?\n                            mappedList.map((item,index)=>\n                            <tr key={index}>\n                            <th scope=\"row\">{index +1}</th>\n                            <td>{item.name}</td>\n                            <td>{item.email}</td>\n                            <td>{item.contact_number}</td>\n                            <td>\n                              <Button color=\"danger\" className=\"default btn-sm tbl_action_btn\" onClick={()=>{toggleModal(item.id)}}>\n                                  <i className=\"glyph-icon simple-icon-trash\"></i>\n                              </Button>\n                            </td>\n                          </tr>\n                          ):\n                          <tr>\n                            <td className=\"text-center text-danger\" colSpan=\"5\">Data  Not  Found</td>\n                          </tr>}\n                        </tbody>\n                      </Table>:\n                      <Table responsive bordered striped>\n                      <thead>\n                        <tr>\n                          <th>#</th>\n                          <th>Name</th>\n                          <th>Fleet Id</th>\n                          <th>Address</th>\n                          <th>Contact Person</th>\n                          <th>Contact Email</th>\n                          <th>Contact Number</th>\n                          <th>Remark 2</th>\n                          <th>Remark 2</th>\n                          <th>Action</th>\n                        </tr>\n                      </thead>\n                      <tbody>\n                        {listFlag>0?\n                          mappedList.map((item,index)=>\n                          <tr key={index}>\n                          <th scope=\"row\">{index +1}</th>\n                          <td>{item.name}</td>\n                          <td>{item.fleet_id}</td>\n                          <td>{item.address}</td>\n                          <td>{item.contact_person}</td>\n                          <td>{item.contact_email}</td>\n                          <td>{item.contact_number}</td>\n                          <td>{item.remark_1}</td>\n                          <td>{item.remark_2}</td>\n                          <td>\n                            <Button color=\"danger\" className=\"default btn-sm tbl_action_btn\" onClick={()=>{toggleModal(item.fleet_operator_id)}}>\n                                <i className=\"glyph-icon simple-icon-trash\"></i>\n                            </Button>\n                          </td>\n                        </tr>\n                        ):\n                        <tr>\n                          <td className=\"text-center text-danger\" colSpan=\"10\">Data  Not  Found</td>\n                        </tr>}\n                      </tbody>\n                    </Table>\n                  }\n              <Modal\n                isOpen={modalVisible}\n                toggle={toggleModal} >\n                <ModalHeader className=\"text-center\">\n                  <Row>\n                    <Colxx md=\"12\">\n                      Are you sure you would like to unmap this ?\n                    </Colxx>\n                    <Colxx md=\"12\">\n                      <Button color=\"success\" className=\"mt-4\" onClick={()=>MapByRoleAPICall(0,unmapId,0)}>\n                        Unmap \n                      </Button>{' '}\n                      <Button color=\"danger\" className=\"mt-4 mr-2\" onClick={toggleModal}>\n                        Cancel\n                      </Button>\n                    </Colxx>\n                  </Row>\n                </ModalHeader>\n              </Modal>\n            </CardBody>\n          </Card>\n        </Colxx>\n      </Row>\n    </>\n  );\n};\n\nexport default StationDetail; "]},"metadata":{},"sourceType":"module"}